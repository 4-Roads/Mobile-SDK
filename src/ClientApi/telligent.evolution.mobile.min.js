(function(){var va,L;(function(q){var h={},k=function(m){m=h[m];if(m==q)return null;if(m.compiled)return m.compiled;var j=[];if(m.dependencies&&m.dependencies.length>0)for(var g=0;g<m.dependencies.length;g++)j.push(k(m.dependencies[g]));m.compiled=m.factory.apply(this,j.concat(m.extraArguments));return m.compiled};va=function(m,j){var g=m,c=j,i=2;if(!g.splice){c=g;g=q;i--}i=Array.prototype.slice.call(arguments,i);for(var p=[],l=0;l<g.length;l++)p.push(k(g[l]));c.apply(this,p.concat(i))};L=function(m,
j,g){var c=j,i=g,p=3;if(!c.splice){i=c;c=q;p--}p=Array.prototype.slice.call(arguments,p);h[m]={dependencies:c,factory:i,extraArguments:p||[]}}})();L("actionSheet",function(q){return function(h){h=h||{};h.sheet=h.sheet;return{show:function(k){k=k||{};k.links=k.links||[];var m=h;k=k.links||[];var j=q(document.createElement("ul"));j.addClass("action-sheet");for(var g=0;g<k.length;g++){var c=j,i=k[g],p=q(document.createElement("li"));p.append(i);c.append(p)}m.sheet.show(j)},hide:function(){h.sheet.hide()}}}},
jQuery,window);L("authentication",["transport","environment","messaging"],function(q,h,k,m,j){function g(){return q.load("callback.ashx?deauthenticate=deauthenticate",{async:false})}return function(c){var i=false,p=function(l){if(l["native"]=="logout"){g();k.publish("user.logout",{});c.controller.reset(true)}else if(l["native"]=="login"){q.load("callback.ashx?authenticate="+encodeURIComponent(l.token),{async:false});k.publish("user.login",{});c.controller.reset(true)}};return{handleLoginLogout:function(l){p(l)},
login:function(l){l=l||j.location.href;var o="client=";o+=c.isNative?"native":h.type=="webapp"?"standalone":"unknown";o+="&url="+encodeURIComponent(l);if(c.isNative)if(c.useDeviceBrowserForLogin){j.open(q.baseUrl()+"callback.ashx?login=login&state="+encodeURIComponent(o),"_system","");h.device=="android"&&navigator.app.exitApp()}else{if(!i){hasChildBrowse=true;var f=j.open(q.baseUrl()+"callback.ashx?login=login&state="+encodeURIComponent(o),"_blank","");f.addEventListener("loadstop",function(d){if(d.url.indexOf(q.baseUrl())>=
0&&d.url.indexOf("callback.ashx")>-1){d=d.url.substr(d.url.indexOf("?")+1).split("&");for(var b={},n=0;n<d.length;n++){var v=d[n].split("=");if(v.length==2){var z=decodeURIComponent(v[0]);v=decodeURIComponent(v[1]);b[z]=v}}f.close();p(b)}});f.addEventListener("exit",function(){i=false})}}else{l=q.baseUrl()+"callback.ashx?login=login&state="+encodeURIComponent(o);if(h.type=="webapp"){o=m("#header").is(":visible")?m("#header").height():0;if(m("body.ios.native, body.ios.webapp").length>0)o+=20;var a=
m("<div></div>").css({position:"fixed",width:m(document).width()+"px",height:m(document).height()+"px",top:m(document).height()+"px",left:"0px","z-index":100,transition:"-webkit-transform 0.4s cubic-bezier(0.455, 0.03, 0.515, 0.955)"});m('<a href="#">&nbsp;</a>').css({display:"block",height:o+"px",overflow:"hidden"}).on("click",function(){a.remove();return false}).appendTo(a);m("<div></div>").css({"-webkit-overflow-scrolling":"touch",overflow:"scroll","background-color":"#fff",width:m(document).width()+
"px",height:m(document).height()-o+"px"}).appendTo(a).append(m('<iframe src="'+l+'" frameborder="0"></iframe>').css({width:m(document).width()+"px","min-height":m(document).height()-o+"px"}));m("body").append(a);a.css({"-webkit-transform":"translateY(-"+m(document).height()+"px)"})}else j.location.href=l}},logout:function(){q.load("callback.ashx?logout=logout").done(function(){if(c.isNative){k.publish("user.logout",{});g()}c.controller.reset(true)})}}}},jQuery,window);L("evolutionMobileComments",
["messaging"],function(q,h){function k(a){a.viewMore.on("click",function(b){b.preventDefault();i(a);return false});a.commentsWrapper.on("click","a.comment-actions",function(b){b.preventDefault();m(a,h(b.target).closest("a"));return false});a.postCommentLink.on("click",function(b){b.preventDefault();j(a);a.postCommentLink.hide();return false});var d;a.postCommentLink.hide();a.commentInput.on({focus:function(){clearTimeout(d);a.postCommentLink.show()},blur:function(){d=setTimeout(function(){a.postCommentLink.hide()},
10)}});a.commentInput.one("focus",function(){a.commentInput.evolutionComposer({plugins:["hashtags","mentions"],focus:false}).focus()})}function m(a,d){var b=[],n=[];d.data("candelete")&&n.push(h.Deferred(function(v){var z=h('<a href="#">Delete</a>');z.on("tap",function(){g(a,d.data("commentid"),d.closest(".post-list-item"))});b[0]=z;v.resolve()}).promise());a.canFlagAsAbusive&&n.push(h.Deferred(function(v){f.listAbuseReports(d.data("commentid"),a.accessingUserId).done(function(z){if(z.TotalCount==
0){z=h('<a href="#">Flag as spam/abuse</a>');z.on("click",function(){c(a,d.data("commentid"),d.data("commentcontenttypeid"))})}else{z=h('<a href="#">Flagged as spam/abuse</a>');z.on("click",function(){})}b[1]=z;v.resolve()}).fail(function(){v.resolve(null)})}));n.push(h.Deferred(function(v){var z=h('<a href="#">Cancel</a>');z.on("click",function(){h.telligent.evolution.mobile.hideSheet()});b[a.canFlagAsAbusive?2:1]=z;v.resolve()}).promise());h.when.apply(h,n).then(function(){h.telligent.evolution.mobile.displaySheet({links:b})})}
function j(a){var d=a.commentInput.evolutionComposer("val");if(!(!d||d.length==0)){a.commentInput.blur();a.commentInput.evolutionComposer("val","");f.addComment(a.contentId,a.contentTypeId,a.typeId,d).done(function(b){a.commentFieldSet.addClass("with-comments");b.Comment.IsApproved?a.commentsList.append(l({canLike:a.canLike,canFlagAsAbusive:a.canFlagAsAbusive,comments:[b.Comment]})):h.telligent.evolution.mobile.displayMessage(a.approvalRequiredResource,{disappearAfter:5E3,cssClass:"info"})}).fail(function(){})}}
function g(a,d,b){h.telligent.evolution.mobile.confirm(a.deleteConfirmationResource,function(n){n?f.del(d).then(function(){b.remove();h.telligent.evolution.mobile.hideSheet()}):h.telligent.evolution.mobile.hideSheet()})}function c(a,d,b){confirm(a.reportAbuseConfirmationResource)?f.addAbuseReport(d,b).then(function(){q.publish("ui.reportabuse",{contentId:d,contentTypeId:b})}):h.telligent.evolution.mobile.hideSheet()}function i(a){f.loadComments(a.contentId,a.contentTypeId,a.typeId,a.pageIndex,a.pageSize).done(function(d){d.UserCanCreateComment?
a.commentForm.show():a.commentForm.hide();d.TotalCount>0&&a.commentFieldSet.addClass("with-comments");if((d.PageIndex+1)*d.PageSize<d.TotalCount){a.viewMore.show();a.pageIndex++}else a.viewMore.hide();a.commentsList.prepend(l({canLike:a.canLike,canFlagAsAbusive:a.canFlagAsAbusive,comments:(d.Comments||[]).reverse()}))}).fail(function(){})}var p,l,o,f={loadComments:function(a,d,b,n,v){var z={ContentId:a,ContentTypeId:d,PageIndex:n,PageSize:v,IsApproved:"true",SortBy:"CreatedUtcDate",SortOrder:"Descending"};
if(b)z.CommentTypeId=b;return h.telligent.evolution.mobile.showLoading(h.Deferred(function(y){h.telligent.evolution.get({url:jQuery.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/comments.json",data:z,cache:false,dataType:"json"}).done(function(C){h.telligent.evolution.batch(function(){h.each(C.Comments,function(I,F){if(h.telligent.evolution.user.accessing.isSystemAccount){F.CanBeLiked=false;F.Liked=false}else{F.CanBeLiked=true;h.telligent.evolution.get({url:jQuery.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/like.json",data:{ContentId:F.CommentId},cache:false,dataType:"json"}).done(function(H){F.Liked=H.Like!==null}).fail(function(){y.reject()})}h.telligent.evolution.get({url:h.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/likes.json",data:{ContentId:F.CommentId,ContentTypeId:F.CommentContentTypeId,PageSize:1,PageIndex:0},dataType:"json"}).done(function(H){F.TotalLikes=H.TotalCount||0}).fail(function(){y.reject()})})}).done(function(){y.resolve(C)}).fail(function(){y.reject()})}).fail(function(){y.reject()})}).promise())},
addComment:function(a,d,b,n){a={ContentId:a,ContentTypeId:d,Body:n};if(b)a.CommentTypeId=b;return h.telligent.evolution.mobile.showLoading(h.telligent.evolution.post({url:jQuery.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/comments.json",data:a,cache:false,dataType:"json"}).done(function(v){v.Comment&&h.extend(v.Comment,{CanBeLiked:true,Liked:false,TotalLikes:0});return v}))},del:function(a){return h.telligent.evolution.mobile.showLoading(h.telligent.evolution.del({url:jQuery.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/comments/{CommentId}.json",data:{CommentId:a},cache:false,dataType:"json"}))},listAbuseReports:function(a,d){return h.telligent.evolution.mobile.showLoading(h.telligent.evolution.get({url:jQuery.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/abusereports.json",data:{AbusiveContentId:a,ReportingUserId:d,PageSize:1,PageIndex:0},cache:false,dataType:"json"}))},addAbuseReport:function(a,d){return h.telligent.evolution.mobile.showLoading(h.telligent.evolution.post({url:h.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/abusereports.json",data:{ContentId:a,ContentTypeId:d},cache:false,dataType:"json"}))}};h.fn.evolutionMobileComments=function(a){a=h.extend({},h.fn.evolutionMobileComments.defaults,a||{});p=p||h.telligent.evolution.template.compile(a.template);l=l||h.telligent.evolution.template.compile(a.commentsTemplate);o=o||h.telligent.evolution.template.compile(a.postTemplate);a.commentsWrapper=h(p({resources:{more:a.loadMoreResource,comment:a.commentResource}}));a.commentsWrapper.appendTo(this);
a.viewMore=a.commentsWrapper.find("a.view-more:first");a.commentsList=a.commentsWrapper.find("div.post-list:first");a.commentInput=a.commentsWrapper.find("textarea:first");a.postCommentLink=h(o({postResource:a.postResource})).hide();a.commentFieldSet=a.commentsWrapper.find("fieldset:first");a.commentForm=a.commentsWrapper.find("div.comment-form:first");h.telligent.evolution.mobile.setHeaderButton(a.postCommentLink);k(a);a.pageIndex=0;i(a);return this};h.fn.evolutionMobileComments.defaults={contentId:"",
contentTypeId:"",typeId:"",pageSize:5,canLike:!h.telligent.evolution.user.accessing.isSystemAccount,canFlagAsAbusive:false,accessingUserId:0,template:' <div class="comments">     <a href="#" class="view-more" style="display: none"><%: resources.more %></a>     <div class="post-list">     </div>     <div class="comment-form" style="display: none;">          <fieldset>              <div class="form-field">                  <textarea placeholder="<%: resources.comment %>"></textarea>             </div>          </fieldset>      </div>  </div> ',
postTemplate:'<a href="#" class="submit"><%= postResource %></a>',commentsTemplate:' <% foreach(comments, function(comment){ %>      <div class="post-list-item content-item" data-commentid="<%= comment.CommentId %>">          <div class="post">              <div class="avatar">                  <img class="ui-resizedimage" data-src="<%= comment.User.AvatarUrl %>" data-width="40" data-height="40" />              </div>              <span class="date ui-formatteddate" data-date="<%= comment.CreatedDate %>" data-format="ago"></span>              <span class="author">                  <% if(comment.User.ProfileUrl) { %>                      <a href="<%= comment.User.ProfileUrl %>"><%= comment.User.DisplayName %></a>                  <% } else { %>                      <%= comment.User.DisplayName %>                  <% } %>              </span>              <div class="content">                 <%= jQuery.telligent.evolution.mobile.detectData(comment.Body || "") %>             </div>              <ul class="actions ui-links">                  <% if(canLike && comment.CanBeLiked) { %>                      <li class="action-like">                          <span class="ui-like" data-contentid="<%= comment.CommentId %>" data-contenttypeid="<%= comment.CommentContentTypeId %>" data-format="{toggle} {count}" data-initialcount="<%: comment.TotalLikes %>" data-initialstate="<%: comment.Liked %>" data-configuration="" ></span>                     </li>                  <% } else if(comment.TotalLikes > 0) { %>                      <li class="action-like">                          <span class="ui-like" data-contentid="<%= comment.CommentId %>" data-contenttypeid="<%= comment.CommentContentTypeId %>" data-format="{count}" data-initialcount="<%: comment.TotalLikes %>" data-initialstate="<%: comment.Liked %>" data-configuration="" ></span>                     </li>                  <% } %>                  <% if(canFlagAsAbusive || comment.UserCanDelete) { %>                      <li class="action-more">                          <a class="comment-actions init" href="#" data-commentid="<%= comment.CommentId %>" data-commentcontenttypeid="<%= comment.CommentContentTypeId %>" <% if(comment.UserCanDelete) { %> data-candelete="true" <% } %> >test</a>                      </li>                  <% } %>              </ul>          </div>      </div>  <% }); %> ',
loadMoreResource:"Load More Comments",postResource:"Post",commentResource:"Leave a comment",deleteConfirmationResource:"Are you sure you want to delete this comment?",reportAbuseConfirmationResource:"Are you sure you want to report this comment?",approvalRequiredResource:"Thank you, your comment requires moderation so it may take a while to appear"}},jQuery,window);L("controller",["shell","transport","navigator","authentication","uilinks","messaging","environment","storage","postlisthandler","dataDetector",
"scrollfix"],function(q,h,k,m,j,g,c,i,p,l,o,f,a,d){function b(e){e.gutterContent=f("#gutter-content");e.refreshIndicator=f("#refresh-indicator");e.refreshableContent=f("#refreshable-content");e.header=f("#header");e.content=f("#content");e.window=f(window);e.viewport=f("#viewport")}function n(e){e.shell.showLoading({cssClass:e.loadingCssClass,content:e.loadingContent,opacity:e.loadingOpacity})}function v(e){e.postListHandler.clearHighlights();e.shell.hideLoading()}function z(e){e.refreshIndicatorPull=
e.refreshIndicatorPull||f('<span class="icon pull down-circled"></span>').hide().appendTo(e.refreshIndicator);e.refreshIndicatorPullVisible=false;e.refreshIndicatorRelease=e.refreshIndicatorRelease||f('<span class="icon release cw"></span>').hide().appendTo(e.refreshIndicator);e.refreshIndicatorReleaseVisible=false;e.shell=new q({easing:e.easing,navigationOpenPercent:e.navigationOpenPercent,navigationOpenDuration:e.navigationOpenDuration,navigationClosedOffsetPercent:e.navigationClosedOffsetPercent,
navigationClosedZoom:e.navigationClosedZoom,sheetMaxHeightPerent:e.sheetMaxHeightPerent,sheetCssClass:e.sheetCssClass,sheetBackgroundColor:e.sheetBackgroundColor,sheetBackgroundOpacity:e.sheetBackgroundOpacity,refreshOverflow:e.refreshOverflow,refreshRevealThrottle:e.refreshRevealThrottle,doubleTapHeaderToScroll:e.doubleTapHeaderToScroll,enablePan:e.enablePan,header:e.header,viewport:e.viewport,gutter:"#gutter",content:e.content,contentWrapper:"#content-wrapper",gutterWrapper:"#gutter-wrapper",gutterContent:e.gutterContent,
refreshIndicator:e.refreshIndicator,refreshableContent:e.refreshableContent,debugContainer:"#debug",onRefreshRevealStart:function(){e.refreshIndicatorPull.evolutionTransform({opacity:0,duration:20})},onRefreshRevealing:function(r){if(r>=1){r=1;e.refreshIndicatorPull.addClass("ready")}else e.refreshIndicatorPull.removeClass("ready");if(e.refreshIndicatorReleaseVisible){e.refreshIndicatorRelease.hide();e.refreshIndicatorReleaseVisible=false}if(!e.refreshIndicatorPullVisible){e.refreshIndicatorPull.show();
e.refreshIndicatorPullVisible=true}if(e.refreshIndicatorPullVisible){r=Math.round(r*100)/100;if(e.lastRefreshOpacity==d||e.lastRefreshOpacity!=r){e.lastRefreshOpacity=r;e.refreshIndicatorPull.evolutionTransform({rotate:r==1?180:0,opacity:r},{duration:e.refreshRevealThrottle})}}},onRefreshing:function(r){e.refreshing=true;g.publish(J.contentRefreshing);e.refreshIndicatorPull.hide();e.refreshIndicatorPullVisible=false;e.refreshIndicatorRelease.show();e.refreshIndicatorReleaseVisible=true;e.refreshComplete=
function(){e.refreshIndicatorPull.hide();e.refreshIndicatorPullVisible=false;e.refreshIndicatorRelease.hide();e.refreshIndicatorReleaseVisible=false;o.isScrolling(false);r();e.refreshing=false;g.publish(J.contentRefreshed)};e.navigator.refresh(e.refreshParams)},onNavigationOpening:function(){g.publish(J.navigationOpening)},onNavigationOpened:function(){g.publish(J.navigationOpened)},onNavigationClosing:function(){g.publish(J.navigationClosing)},onNavigationClosed:function(){g.publish(J.navigationClosed)},
onSheetOpening:function(){g.publish(J.sheetOpening)},onSheetOpened:function(){g.publish(J.sheetOpened)},onSheetClosing:function(){g.publish(J.sheetClosing)},onSheetClosed:function(){g.publish(J.sheetClosed)},onKeyboardOpening:function(){g.publish(J.keyboardOpen)},onKeyboardClosing:function(){g.publish(J.keyboardClose)},onKeyboardOpened:function(){g.publish(J.keyboardOpened)},onKeyboardClosed:function(){g.publish(J.keyboardClosed)}})}function y(e){f(a).on("orientationchange",function(){g.publish(J.orientationChange)});
document.addEventListener("deviceready",function(){e.navigator.refresh(e.refreshParams);g.publish(J.start)},false);document.addEventListener("offline",function(){g.publish(J.offline)},false);document.addEventListener("online",function(){g.publish(J.online)},false);document.addEventListener("resume",function(){var r;r=(r=i.get("last_paused_at"))?parseFloat(r):(new Date).getTime();(new Date).getTime()-r>=e.cacheDuration&&e.navigator.refresh(e.refreshParams);g.publish(J.resume)},false);document.addEventListener("pause",
function(){i.set("last_paused_at",(new Date||new Date).getTime());g.publish(J.pause)},false)}function C(e){e.shell.contentWrapper().on({focusin:function(r){if(e.shell.navigationVisible()){f(r.target).blur();e.shell.navigationContent().find("input,select,textarea").last().focus();return false}}});e.shell.navigationContent().on({focusin:function(r){if(!e.shell.navigationVisible()){f(r.target).blur();e.shell.contentWrapper().find("input,select,textarea").first().focus();return false}}})}function I(e){e.focusInputsOnLabelTap||
e.refreshableContent.on("tap","label",function(r){r.preventDefault();return false})}function F(e,r,B,K){var N=r.attr("href")||r.closest("[href]").attr("href");if(r.data("messagename"))return true;r=f.trim(N);if(r=="#")return false;else if(r.indexOf("http:")<0&&r.indexOf("https:")<0&&r.indexOf(":")>=0){window.location.href=r;return false}K.stopPropagation();H(e,N,B,false);return true}function H(e,r,B,K){if(r.indexOf("#login")>=0)e.authenticator.login();else if(r.indexOf("#logout")>=0)e.authenticator.logout();
else r.indexOf("#")===0?e.shell.contentScrollTop(f("a[name="+r.substr(1)+"],a[id="+r.substr(1)+"]").first()):e.navigator.navigateTo(r,{replace:B,refresh:K,currentContentScrollTop:e.shell.contentScrollTop()})}function G(e){e.refreshableContent.on("click","a",function(r){r.preventDefault();return o.isScrolling()?false:F(e,f(r.target),false,r)});e.gutterContent.on("click","a",function(r){r.preventDefault();e.shell.navigationVisible(false);return F(e,f(r.target),true,r)});e.header.on("click","a",function(r){r.preventDefault();
return F(e,f(r.target),false,r)})}function t(e){if(e.enableSoftBackButton)a.setTimeout(function(){if(e.navigator.canNavigateBack()){D(e.backButton);E(e.menuButton);E(e.closeKeyboardButton)}else{E(e.backButton);E(e.closeKeyboardButton);e.shell.navigable()&&D(e.menuButton)}},10);else{E(e.backButton);E(e.closeKeyboardButton);e.shell.navigable()&&D(e.menuButton)}}function w(e){e.navigator=new k({authenticator:e.authenticator,defaultUrl:e.defaultContentUrl,initFromStorage:c.type=="webapp",cacheDuration:e.cacheDuration,
useDeviceBrowserForExternalUrls:e.isHttpAuth,onDetermineRedirect:function(){a.clearTimeout(e.hideLoadingIndicatorTimeout);n(e)},onDeterminedRedirect:function(){a.clearTimeout(e.hideLoadingIndicatorTimeout);e.hideLoadingIndicatorTimeout=a.setTimeout(function(){a.clearTimeout(e.hideLoadingIndicatorTimeout);v(e)},100)},onLoad:function(r){a.clearTimeout(e.contentRenderedMessageTimeout);e.currentHeaderButton&&E(e.currentHeaderButton,true);if(!e.refreshing){a.clearTimeout(e.hideLoadingIndicatorTimeout);
n(e)}e.shell.hideSheet();g.publish(J.contentLoading,{url:r});return h.load(r)},onLoadError:function(){v(e);e.shell.displayMessage("An error has occurred",{cssClass:"warning",disappearAfter:1E4})},onLoadFromCache:function(r){g.publish(J.contentLoading,{url:r})},onNavigated:function(r,B,K,N){a.clearTimeout(e.contentRenderedMessageTimeout);e.currentHeaderButton&&E(e.currentHeaderButton,true);e.shell.setClass();e.refreshParams=null;if(e.refreshComplete){e.refreshComplete();delete e.refreshComplete}var X=
"dissolve";if(K=="forward")X="left";else if(K=="back")X="right";e.shell.setContent(B,{animate:X}).then(function(){});e.shell.contentScrollTop(N||0);e.refreshing=false;v(e);g.publish(J.contentLoaded,{url:r});e.contentRenderedMessageTimeout=a.setTimeout(function(){a.clearTimeout(e.contentRenderedMessageTimeout);g.publish(J.contentRendered,{url:r})},e.navigationOpenDuration*2);t(e)}})}function s(e,r){e.authenticator=new m({controller:r,isNative:h.isNative(),useDeviceBrowserForLogin:e.isHttpAuth})}function x(e,
r,B,K){f(r).addClass("header-button").css({opacity:K?0.01:1}).appendTo(B=="shell"?e.headerShellArea:e.headerButtonArea);K&&D(r)}function E(e,r,B){if(B)e.evolutionTransform({opacity:0.01},{duration:200,complete:function(){if(r===true||r==="remove")e.remove();else r==="detach"?e.detach():e.css({display:"none"})}});else if(r===true||r==="remove")e.remove();else r==="detach"?e.detach():e.css({display:"none"});return e}function D(e){e.css({opacity:0.01,display:"block"});e.evolutionTransform({opacity:0.99},
{duration:200});return e}function S(e){e.menuButton=f('<span class="icon menu"></span>');e.backButton=f('<span class="icon left-open"></span>');e.closeKeyboardButton=f('<span class="icon down-open"></span>');e.menuButton.on("click",function(){if(e.shell.navigationVisible()){clearTimeout(e.openTimeout);e.shell.navigationVisible(false);e.refreshIndicatorPull.show().hide()}else if(c.device=="android")e.openTimeout=a.setTimeout(function(){e.shell.navigationVisible(true);e.gutterContent.find("input,textarea").blur()},
350);else{e.shell.navigationVisible(true);e.gutterContent.find("input,textarea").blur()}});e.closeKeyboardButton.on("tap",function(r){r.preventDefault();if(c.device=="android")e.openTimeout=a.setTimeout(function(){f(document.activeElement).blur()},350);else f(document.activeElement).blur();return false});e.backButton.on("click",function(){e.navigator.navigateBack({currentContentScrollTop:e.shell.contentScrollTop()})});e.headerShellArea=f(document.createElement("div")).addClass("shell").appendTo(e.header);
e.headerUserArea=f(document.createElement("div")).addClass("user").appendTo(e.header);e.headerButtonArea=f(document.createElement("div")).addClass("button").appendTo(e.header);if(e.enableRefreshButton){e.refreshButton=f('<a href="#" class="refresh"><span class="icon cw"></span></a>');e.refreshButton.on("click",function(){e.shell.refresh()});x(e,e.refreshButton,"shell")}x(e,e.menuButton.hide(),"shell",false);x(e,e.backButton.hide(),"shell",false);x(e,e.closeKeyboardButton.hide(),"shell",false)}function P(e){if(!f.telligent.evolution.user.accessing.isSystemAccount||
e.allowAnonymous){g.publish(J.navigationLoading);h.load(e.navigationContentUrl).done(function(r){g.clear(g.NAVIGATION_SCOPE);e.gutterContent.empty().append(r);g.publish(J.navigationLoaded);g.publish(J.navigationRendered)})}}function Q(e){document.addEventListener("backbutton",function(){e.shell.navigationVisible()?e.shell.navigationVisible(false):e.navigator.navigateBack({currentContentScrollTop:e.shell.contentScrollTop()})},false)}function oa(e){e.postListHandler=new p({parent:f(e.content),highlightClassName:"post-list-item-loading",
onTap:function(r){e.navigator.navigateTo(r,{currentContentScrollTop:e.shell.contentScrollTop()})}});e.postListHandler.handleTargetedTaps()}function pa(e,r){if(e.enableRefreshButton)if(r===true)e.shell.navigable()&&D(e.refreshButton);else r===false&&E(e.refreshButton);return e.shell.refreshable(r)}function T(e){if(c.device!="android"){g.subscribe(J.keyboardOpen,g.GLOBAL_SCOPE,function(){E(e.backButton);E(e.menuButton);D(e.closeKeyboardButton)});g.subscribe(J.keyboardClose,g.GLOBAL_SCOPE,function(){E(e.closeKeyboardButton);
t(e)})}}function la(e,r){a.handleOpenURLInternal=function(B){a.setTimeout(function(){var K={};K.path=B.substr(B.indexOf("://")+3);if(K.path.indexOf("?")>-1)K.path=K.path.substr(0,K.path.indexOf("?"));var N=B.substr(B.indexOf("?")+1).split("&");K.data={};for(var X=0;X<N.length;X++){var ba=N[X].split("=");if(ba.length==2){var qa=decodeURIComponent(ba[0]);ba=decodeURIComponent(ba[1]);K.data[qa]=ba}}r[K.path]!==d&&r[K.path](K.data)},1)}}function ca(e){la(e,{auth:function(r){e.authenticator.handleLoginLogout(r)},
redirect:function(r){h.adjustUrl(r.url).done(function(B){B&&B.redirectUrl&&e.navigator.navigateTo(B.redirectUrl,{currentContentScrollTop:e.shell.contentScrollTop(),refresh:true})})}})}var J={contentRefreshing:"mobile.content.refreshing",contentRefreshed:"mobile.content.refreshed",contentLoading:"mobile.content.loading",contentLoaded:"mobile.content.loaded",contentRendered:"mobile.content.rendered",navigationLoading:"mobile.navigation.loading",navigationLoaded:"mobile.navigation.loaded",navigationOpening:"mobile.navigation.opening",
navigationOpened:"mobile.navigation.opened",navigationClosing:"mobile.navigation.closing",navigationClosed:"mobile.navigation.closed",navigationRendered:"mobile.navigation.rendered",sheetOpening:"mobile.sheet.opening",sheetOpened:"mobile.sheet.opened",sheetClosing:"mobile.sheet.closing",sheetClosed:"mobile.sheet.closed",orientationChange:"mobile.orientationchange",keyboardOpen:"mobile.keyboard.open",keyboardClose:"mobile.keyboard.close",keyboardOpened:"mobile.keyboard.opened",keyboardClosed:"mobile.keyboard.closed",
online:"mobile.online",offline:"mobile.offline",start:"mobile.start",pause:"mobile.pause",resume:"mobile.resume"},O={allowAnonymous:false,isHttpAuth:false,defaultContentUrl:"default",navigationContentUrl:"navigation",enableRefreshButton:false,enablePan:true,enableSoftBackButton:true,doubleTapHeaderToScroll:true,focusInputsOnLabelTap:false,loadingCssClass:"loading",loadingContent:'<span class="icon cw"></span>',loadingOpacity:0.7,easing:"cubic-bezier(0.160, 0.060, 0.450, 0.940)",navigationOpenPercent:0.8,
navigationOpenDuration:275,navigationClosedOffsetPercent:-0.2,navigationClosedZoom:0,sheetMaxHeightPerent:0.7,sheetCssClass:"sheet",sheetBackgroundColor:"#333",sheetBackgroundOpacity:0.7,refreshOverflow:10,refreshRevealThrottle:200,cacheDuration:6E5,telephonePattern:null};j=function(e){var r=f.extend({},O,e||{});e={refreshable:function(B){return pa(r,B)},navigable:function(B){if(B!==d)if(B)t(r);else{E(r.menuButton);r.refreshButton&&E(r.refreshButton)}return r.shell.navigable(B)},load:function(B,K){H(r,
B,K&&K.replace,K&&K.refresh)},refresh:function(){r.navigator.refresh(r.refreshParams)},back:function(B){r.navigator.navigateBack({currentContentScrollTop:r.shell.contentScrollTop(),refresh:B})},navigationVisible:function(B){return r.shell.navigationVisible(B)},navigationScrollTop:function(B){return r.shell.navigationScrollTop(B)},contentScrollTop:function(B){return r.shell.contentScrollTop(B)},displayMessage:function(B,K){r.shell.displayMessage(B,K)},alert:function(B,K){r.shell.alert(B,K)},confirm:function(B,
K){r.shell.confirm(B,K)},setHeaderButton:function(B){r.currentHeaderButton&&E(r.currentHeaderButton,"detach",true);x(r,B,"button",true);r.currentHeaderButton=B},setHeaderContent:function(B){r.headerUserArea.empty().append(B)},refreshNavigation:function(){P(r)},debug:function(B){r.shell.debug(B)},reset:function(B){r.headerUserArea.empty();r.headerButtonArea.empty();i.empty();if(B===true)a.location.reload();else{r.navigator.reset();P(r)}},addRefreshParameter:function(B,K){r.refreshParams=r.refreshParams||
{};r.refreshParams[B]=K},displaySheet:function(B){r.shell.displaySheet(B)},hideSheet:function(){r.shell.hideSheet()},scrollable:function(B){r.shell.scrollable(B)},clearContent:function(B){r.navigator.clearContent(B)},excludeFromHistory:function(){r.navigator.excludeFromHistory()},setExpiration:function(B,K){r.navigator.setExpiration(B,K)},setClass:function(B){r.shell.setClass(B)},showLoading:function(B){if(B){if(B.state()=="pending"){n(r);B.then(function(){v(r)})}return B}else n(r)},hideLoading:function(){v(r)},
detectData:function(B){if(!r.dataDetector)r.dataDetector=new l({patterns:{telephone:r.telephonePattern}});return r.dataDetector.detect(B)}};b(r);z(r);oa(r);S(r);s(r,e);w(r);P(r);G(r);I(r);y(r);Q(r);C(r);ca(r);T(r);o.monitorEffectiveScrollState(r.content);g.subscribe("mobile.content.loading",g.GLOBAL_SCOPE,function(){pa(r,true)});return e};j.defaults=O;return j},jQuery,window);L("dataDetector",function(q){function h(i){return q("<div/>").text(i||"").html()}function k(i,p){return q(i).find(":not(iframe)").addBack().contents().filter(function(){return this.nodeType==
3&&q(this).closest(p).length==0})}function m(i,p,l){i=q("<div></div>").append(i);k(i,p).each(function(){q(this).replaceWith(l(this.textContent?this.textContent:this.innerText))});return i.html()}function j(i){var p=q.extend({},j.defaults,i||{});p.patterns=q.extend({},j.defaults.patterns,i!=null?i.patterns||{}:{});q.each(p.patterns,function(l,o){p.patterns[l]=RegExp(o,"gi")});return{detect:function(l){return m(l,"a,script,style,textarea",function(o){var f=o;q.each(c,function(a,d){if(p.patterns[a])f=
f.replace(p.patterns[a],d)});return f})}}}var g=/[^\d]+/ig,c={telephone:function(i){return' <a href="tel:'+q.trim(h(i.replace(g,"")))+'">'+q.trim(h(i))+"</a> "}};j.defaults={patterns:{telephone:"(?:(?:\\(?(?:00|\\+)?(?:[1-4]\\d\\d|[1-9]\\d?)\\)?)?[\\-\\.\\s\\\\\\/]?)?(?:(?:\\(?\\d{3,}\\)?[\\-\\.\\s\\\\\\/]?){2,})"}};return j},jQuery,window);L("dynamicLinks",["scrollfix","actionSheet"],function(q,h,k,m,j){function g(b){return b.outerWidth(true)+parseInt(b.css("marginLeft"),10)+parseInt(b.css("marginRight"),
10)}function c(b){b.parent.css({overflow:"hidden"}).empty();b.listWrapper=k(document.createElement("div")).css(o).addClass("container").appendTo(b.parent);b.parentWidth=b.listWrapper.outerWidth();b.list=k(document.createElement("ul")).appendTo(b.listWrapper).css(f);b.listWrapper.on("pan swipe pointerend",function(n){if(n.direction=="left"||n.direction=="right")n.stopPropagation()});q.preventBounce(b.listWrapper)}function i(b){b.additionalLinks=[];b.accumulatedWidth=0;b.preScrollTo=0;b.moreLinkWidth=
0;if(b.moreLink!=j){b.moreLink.element.css(a);b.list.append(b.moreLink.element);b.moreLinkWidth=g(b.moreLink.element);b.moreLink.element.detach()}for(var n=0;n<b.links.length;n++){var v=b.links[n],z=k(document.createElement("li")).append(v.element);z.css({display:"inline"}).addClass(v.className);z.appendTo(b.list);v.element.css(a);var y=g(v.element);if(v.selected)b.preScrollTo=b.accumulatedWidth;if(b.accumulatedWidth+y>b.parentWidth&&n+1<=b.minLinks)b.accumulatedWidth+=y;else if(b.additionalLinks.length>
0||(b.accumulatedWidth+y+b.moreLinkWidth>b.parentWidth||n+1>b.maxLinks)&&n+1>b.minLinks){z.detach();b.additionalLinks.push(v)}else b.accumulatedWidth+=y}}function p(b){if(b.additionalLinks.length>0&&b.moreLink&&b.onShowMore){k(document.createElement("li")).css({display:"inline"}).append(b.moreLink.element).addClass(b.moreLink.className).appendTo(b.list);b.accumulatedWidth+=b.moreLinkWidth;b.moreLink.element.off(l).on("click"+l,function(){b.onShowMore(b.additionalLinks,b.cancelLink);return false})}var n=
b.accumulatedWidth>b.parentWidth;b.list.css({width:n?b.accumulatedWidth:b.parentWidth,visibility:"visible"});b.listWrapper.get(0).scrollLeft=b.preScrollTo-b.preScrollOffset;var v=b.list.height();b.parent.css({height:v});b.listWrapper.css({height:v+20});n&&b.animate&&k(b.listWrapper.get(0)).evolutionTransform({left:100,opacity:0},{duration:0}).evolutionTransform({left:0,opacity:1},{duration:400,easing:"cubic-bezier(0.250, 0.460, 0.450, 0.940)"});q.monitorEffectiveScrollState(b.list)}var l="._dynamicLinks",
o={overflow:"hidden","overflow-x":"auto","-webkit-overflow-scrolling":"touch"},f={visible:"hidden","list-style":"none",padding:"0px",margin:"0px",overflow:"hidden"},a={"float":"left","white-space":"nowrap"},d=function(b){var n=k.extend({},d.defaults,b||{});return{render:function(){c(n);i(n);p(n)},addLink:function(v,z){if(z!=j)n.links.splice(z,0,v);else n.links[n.links.length]=v;c(n);i(n);p(n)},removeLink:function(v){n.links=k.grep(n.links,function(z){return!k(z.element).is(v)});c(n);i(n);p(n)}}};
d.defaults={preScrollOffset:10,minLinks:0,maxLinks:50,parent:null,animate:false,links:[],moreLink:null,cancelLink:null,onShowMore:function(){}};return d},jQuery,window);L("environment",["messaging"],function(q,h,k){var m="unknown",j=true,g="unknown";if(h.mobileNativeConfig){m="native";switch((h.device.platform||"").toLowerCase()){case "iphone":case "ios":g="ios";break;case "android":g="android";break;case "windows":g="windows";break;default:g="unknown"}}else{m=h.navigator.standalone?"webapp":"browser";
g=navigator.userAgent.match(/Android/i)?"android":navigator.userAgent.match(/iPhone|iPad|iPod/i)?"ios":navigator.userAgent.match(/IEMobile/i)?"windows":"unknown"}q.subscribe("mobile.online",q.GLOBAL_SCOPE,function(){j=true});q.subscribe("mobile.offline",q.GLOBAL_SCOPE,function(){j=false});return{type:m,device:g,isOnline:function(){return navigator&&navigator.connection&&navigator.connection.type&&h.Connection!==k?navigator.connection.type!=h.Connection.NONE:navigator.onLine!==k?navigator.onLine:j}}},
window);L("evolutionTransform",function(q,h,k){function m(){var z=(document.body||document.documentElement).style,y=["Moz","webkit","Webkit","Khtml","O","ms"];if(typeof z.transition=="string")return true;for(var C=0;C<y.length;C++)if(typeof z[y[C]+"Transition"]=="string")return true;return false}function j(z,y){if(!this||this.length==0)return this;var C=z||{};y=y||{};var I=[],F,H,G=null,t=null,w=null,s=null;z=[];if(n===null)n=m();this.each(function(){if(this.nodeType!==3){var x=q(this);x.off(".evolutionTransform");
if(y.complete){x.on("transitionend.evolutionTransform",y.complete);x.on("webkitTransitionEnd.evolutionTransform",y.complete);x.on("oTransitionEnd.evolutionTransform",y.complete);x.on("MSTransitionEnd.evolutionTransform",y.complete)}if(!n){if(C.x)C.left=C.x;if(C.y)C.y=C.y;return x.css(C)}for(var E in j.defaults)y[E]||(y[E]=j.defaults[E]);for(var D in C){x=C[D];if(D===g||D===i){F=x;delete C[D]}else if(D===c||D===p){H=x;delete C[D]}else if(D===l){G=x;delete C[D]}else if(D===o){t=x;delete C[D]}else if(D===
f){w=x;delete C[D]}else if(D===a){s=x;delete C[D]}else{if(D==d)if(x===0)C[D]=1.0E-5;else{if(x===1)C[D]=0.99999}else if(typeof x==="number"&&x%1==0)C[D]=x+"px";I[I.length]=D}}if(F!=k||H!=k)z[z.length]="translate3d("+(F||0)+"px, "+(H||0)+"px, 0px)";if(G!=k)z[z.length]="rotateZ("+G+"deg)";if(t!=k)z[z.length]="rotateX("+t+"deg)";if(w!=k)z[z.length]="rotateY("+w+"deg)";if(s!=k)z[z.length]="scale("+s+")";if(z.length>0){x=v+"transform";mergedTransforms=z.join(" ");I[I.length]=x;C[x]=mergedTransforms;C.transform=
mergedTransforms}x=q.fn.evolutionTransform.animationEnabled?y.duration/1E3+"s "+y.easing:"";transition=I.join(" "+x+", ")+" "+x;q.noop(this.offsetHeight);if(w||t){b=b||q("body").get(0);b.style[v+"perspective"]=y.perspective;b.style.perspective=y.perspective}this.style[v+"transition"]=transition;this.style.transition=transition;for(D in C)this.style[D]=C[D]}});return this}var g="x",c="y",i="left",p="top",l="rotate",o="rotateX",f="rotateY",a="scale",d="opacity",b,n=null,v=function(){if(!("getComputedStyle"in
window))return"";var z=window.getComputedStyle(document.documentElement,"");return"-"+(Array.prototype.slice.call(z).join("").match(/-(moz|webkit|ms)-/)||z.OLink===""&&["","o"])[1]+"-"}();j.defaults={duration:0,easing:"linear",perspective:250,complete:null};q.fn.evolutionTransform=j;q.fn.evolutionTransform.animationEnabled=true;return{}},jQuery,window);L("evolutionResize",function(q,h){var k=q(h),m=function(j){var g=k.height()*j.maxHeightPercent,c=false;j.area.css({height:"auto"});var i=j.area.prop("scrollHeight");
if(i>g){c=true;i=g}j.area.css({height:i});i=j.area.outerHeight();if(i!==j.oldHeight){j.area.css({overflow:c?"auto":"hidden"});j.area.trigger("evolutionResize",{newHeight:i,oldHeight:j.oldHeight});j.oldHeight=i}};q.fn.evolutionResize=function(j){var g=q.extend({},q.fn.evolutionResize.defaults,j||{});return this.filter("textarea").each(function(){var c=q(this).css({width:"100%",resize:"none",overflow:"hidden"});c.height();var i={area:c,oldHeight:c.height(),maxHeightPercent:g.maxHeightPercent};setTimeout(function(){m(i);
c.bind("input",function(){m(i)})},500)})};q.fn.evolutionResize.defaults={maxLength:250,maxHeightPercent:0.25};return{}},jQuery,window);L("glowUpload",["environment"],function(q,h,k){if(!(q.type!="native"||!k.navigator.camera||!k.FileTransfer)){var m={val:function(){var a=h(this).data(j);return a!==null&&typeof a.file!=="undefined"&&a.file!==null?{name:a.file.name}:null}},j="_glowUpload",g={begun:"glowUploadBegun",complete:"glowUploadComplete",error:"glowUploadError",progress:"glowUploadFileProgress"},
c=function(a){return this.each(function(){var d=h(this),b=h.extend({},h.fn.glowUpload.defaults,a||{},{file:null,fileOffset:0,fileState:"",isUploading:false,currentUploadPercent:0,fileContainer:null});h.extend(b,{container:d,initialized:false});h(this).data(j,b);b.container.find('input[type="file"]').bind("change",function(){_inputChange(b)}).hide();b.renderMode!="link"&&b.renderMode!="dragdrop"&&h("<div></div>").css({fontSize:"11px",borderWidth:"1px",borderStyle:"solid",borderColor:"#999",width:b.width,
overflow:"auto",overflowX:"hidden",backgroundColor:"#eee",textAlign:"center",padding:".25em"}).append(h('<input type="Button" value="Loading..." />').attr("disabled","disabled").css({borderColor:"Transparent",backgroundColor:"Transparent"})).appendTo(b.container);i(b)})},i=function(a){for(var d=["1234567890","0987654321","0192837465","5647382910"],b=[],n=0;n<2500;n++)b[b.length]=d[Math.floor(Math.random()*d.length)];var v=(new Date).getTime();jQuery.ajax({type:"POST",url:a.uploadUrl,data:{test:b.join("")},
success:function(){var z=(new Date).getTime();p(a,2E5/((z-v)/1E3)*45)},error:function(){p(a,1E6)}})},p=function(a,d){var b=null,n="15000000";if(d<15E6){n=Math.floor(d);if(n<1E5)n=1E5}if(a.renderMode!="link"&&a.renderMode!="dragdrop"){a.container.children().remove();a.container.addClass("glow-upload");var v=h("<div></div>").css({fontSize:"11px",borderWidth:"1px",borderStyle:"solid",borderColor:"#999",width:a.width,overflow:"auto",overflowX:"hidden",backgroundColor:"#fff"}).appendTo(a.container),z=
h("<table></table>").attr("border",0).attr("cellSpacing",0).attr("cellPadding",0).css({width:"100%"});b=h("<tbody></tbody>").appendTo(z);b=h("<tr></tr>").appendTo(b);a.fileContainer=h("<td></td>").appendTo(b).css({width:"100%"});b=h("<td></td>").css({backgroundColor:"#eee",borderLeftWidth:"1px",borderLeftStyle:"solid",borderLeftColor:"#999",padding:".25em"}).attr("vAlign","top").appendTo(b);b=h('<input type="Button" value="'+a.selectFileLabel+'" id="'+a.container.attr("id")+'_browseButton" />').appendTo(b);
v.append(z);o(a);a.pluploader.settings.browse_button=a.container.attr("id")+"_browseButton"}else if(a.renderMode=="link")b=h("#"+a.container.attr("id"));else{v=h("<div></div>").css({position:"absolute",left:"-10000px",top:"-10000px",height:"1px",width:"1px",overflow:"hidden"}).attr("id",a.container.attr("id")+"_browseButton");a.container.append(v);b=h("#"+v.attr("id"))}b.on("click",function(y){y.stopPropagation();y.preventDefault();var C=h('<a href="#" class="link"></a>').text(a.takePhotoOrVideoText);
C.on("click",function(){y.stopPropagation();y.preventDefault();h.telligent.evolution.mobile.hideSheet();k.navigator.camera.getPicture(function(H){setTimeout(function(){l(a,H,n)},9)},function(H){setTimeout(function(){f(a,{message:H,id:-1})},9)},{destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.CAMERA,quality:85,encodingType:Camera.EncodingType.JPEG});return false});var I=h('<a href="#" class="link"></a>').text(a.chooseExistingText);I.on("click",function(){y.stopPropagation();
y.preventDefault();h.telligent.evolution.mobile.hideSheet();k.navigator.camera.getPicture(function(H){setTimeout(function(){l(a,H,n)},9)},function(H){setTimeout(function(){f(a,{message:H,id:-1})},9)},{destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.PHOTOLIBRARY,quality:85,encodingType:Camera.EncodingType.JPEG});return false});var F=h('<a href="#" class="action-cancel"></a>').text(a.cancelText);F.on("click",function(){h.telligent.evolution.mobile.hideSheet()});h.telligent.evolution.mobile.displaySheet({links:[C,
I,F]});return false});a.initialized=true},l=function(a,d,b){var n=function(){a.isUploading=false;a.fileState="error";o(a);k.navigator.camera.cleanup(function(){},function(){});a.container.trigger("glowUploadError")},v=function(y){a.file={name:z};a.fileState="";o(a);if(!a.isUploading){var C=!a.isUploading;a.isUploading=true;a.currentUploadPercent=0;o(a);C&&a.container.trigger(g.begun)}y.file(function(I){var F=-1,H=Math.ceil(I.size/b),G=function(){F++;if(F>=H){a.isUploading=false;a.fileState="uploaded";
o(a);k.navigator.camera.cleanup(function(){},function(){});a.container.trigger(g.complete,{name:z})}else{var t=I.slice(Math.floor(F*b),Math.min(Math.floor((F+1)*b),I.size));k.requestFileSystem(LocalFileSystem.TEMPORARY,0,function(w){w.root.getFile("zimbra-"+F+".chunk",{create:true,exclusive:false},function(s){var x=new FileReader;x.onloadend=function(E){s.createWriter(function(D){D.onwriteend=function(){var S=new FileTransfer,P=0;S.onprogress=function(Q){if(Q.lengthComputable)P=Q.loaded/Q.total;else{P+=
0.01;if(P>1)P=1}try{a.currentUploadPercent=Math.round((F/H+P/H)*100);o(a);a.container.trigger(g.progress,{name:z,percent:a.currentUploadPercent})}catch(oa){}};S.upload(s.toURL(),a.uploadUrl,function(){a.currentUploadPercent=Math.round((F+1)/H*100);s.remove(null,null);k.setTimeout(function(){G()},9);o(a);a.container.trigger(g.progress,{name:z,percent:a.currentUploadPercent})},function(){s.remove(null,null);n()},{fileKey:"file",fileName:z,params:{name:z,chunk:F,chunks:H},chunkedMode:false})};D.write(E.target.result)},
function(){s.remove(null,null);n()})};x.readAsArrayBuffer(t)},n)},n)}};G()},n)},z="image"+(new Date).getTime()+".jpg";d.indexOf("file://")==0?k.resolveLocalFileSystemURI(d,v,n):k.requestFileSystem(LocalFileSystem.TEMPORARY,0,function(y){y.root.getFile("download.tmp",{create:true,exclusive:false},function(C){C=C.toURL();(new FileTransfer).download(d,C,v,n,true,{})},n)},n)},o=function(a){if(a.renderMode!="link"&&a.renderMode!="dragdrop"){var d="";if(a.file)d=a.fileState==="uploaded"?a.uploadedFormat.replace("{0}",
a.file.name):a.fileState==="error"?a.errorFormat.replace("{0}",a.file.name):a.isUploading?a.uploadingFormat.replace("{0}",a.file.name).replace("{1}",a.currentUploadPercent):a.toUploadFormat.replace("{0}",a.file.name);a.fileContainer.html(d)}},f=function(a,d){a.initialized||a.container.children().hide();if(d.file){a.isUploading=false;a.fileState="error";o(a);a.container.trigger(g.error)}};q=(h.fn.glowUpload||{}).defaults||{};q=h.extend({},q,{takePhotoOrVideoText:"Take a photo",chooseExistingText:"Choose existing",
cancelText:"Cancel"});h.fn.glowUpload=function(a){if(a in m)return m[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return c.apply(this,arguments);else h.error("Method "+a+" does not exist on jQuery.fn.glowUpload")};h.extend(h.fn.glowUpload,{defaults:q});return{}}},jQuery,window);L("keyboardShim",["environment"],function(q,h,k){var m=null;h.each([{test:function(){return k.cordova&&k.cordova.plugins&&k.cordova.plugins.Keyboard},build:function(){var j=k.cordova.plugins.Keyboard;
return{handleVisibilityChange:function(g){var c;k.addEventListener("native.keyboardshow",function(){k.clearTimeout(c);g.onShow&&g.onShow()});k.addEventListener("native.keyboardhide",function(){k.clearTimeout(c);c=k.setTimeout(function(){g.onHide&&g.onHide()},5)})},isVisible:function(){return j.isVisible}}}},{test:function(){return k.Keyboard},build:function(){var j=k.Keyboard;return{handleVisibilityChange:function(g){var c;j.onshowing=function(){k.clearTimeout(c);g.onShow&&g.onShow()};j.onhiding=
function(){k.clearTimeout(c);c=k.setTimeout(function(){g.onHide&&g.onHide()},5)};j.onshow=function(){k.clearTimeout(c);g.onShown&&g.onShown()};j.onhide=function(){k.clearTimeout(c);g.onHidden&&g.onHidden()}},isVisible:function(){return j.isVisible}}}},{test:function(){return true},build:function(){function j(c){var i;(new Date).getTime();h(c.container).on({focusin:function(){k.clearTimeout(i);!i&&c.onShow&&c.onShow();g=true},focusout:function(){k.clearTimeout(i);i=k.setTimeout(function(){k.clearTimeout(i);
i=null;c.onHide&&c.onHide();g=false},5)}})}var g=false;return{handleVisibilityChange:function(c){j(c)},isVisible:function(){return g}}}}],function(j,g){if(!m&&g.test())m=g.build()});return m},jQuery,window);L("keyboardfix",["messaging"],function(q,h,k){function m(){h(document.activeElement).is("input, textarea")&&document.activeElement.blur()}function j(){q.subscribe("mobile.navigation.opening",q.GLOBAL_SCOPE,function(){m()});q.subscribe("mobile.navigation.closing",q.GLOBAL_SCOPE,function(){m()});
q.subscribe("mobile.content.loading",q.GLOBAL_SCOPE,function(){m()})}k.cordova&&k.cordova.plugins&&k.cordova.plugins.Keyboard&&k.cordova.plugins.Keyboard.hideKeyboardAccessoryBar(true);return{fix:function(){j()}}},jQuery,window);L("lrucache",function(q,h){var k={size:10,load:function(){},persist:function(){}};return function(m){function j(){var i=c.load();if(!i){i={};c.persist(i)}return i}var g,c=q.extend({},k,m||{load:function(){return g},persist:function(i){g=i}});return{size:function(){return c.size},
get:function(i){var p=j();if(p[i]!==h){p[i].lastAccess=(new Date).getTime();c.persist(p);return p[i].value}else return null},set:function(i,p){var l=j();if(l[i]!==h){l[i].lastAccess=(new Date).getTime();l[i].value=p}else{if(Object.keys(l).length>=c.size){var o=null,f;for(f in l)if(o==null)o=f;else if(l[f].lastAccess<l[o].lastAccess)o=f;o!==null&&delete l[o]}l[i]={lastAccess:(new Date).getTime(),value:p}}c.persist(l)},del:function(i){var p=j();delete p[i];c.persist(p)}}}},jQuery);L("media",function(q,
h){function k(i,p){return i.indexOf(p,i.length-p.length)!==-1}function m(i){var p=[],l;for(l in i)if(l!="success"&&l!="error"&&l!="width"&&l!="height"&&l!="resizeMethod"&&l!="scaleFactor"){p.push(c.text(l).html());p.push('="');p.push(c.text(i[l]).html());p.push('" ')}return p.join("")}function j(i,p){var l,o=i.split("~",2);l={prefix:o[0]+"~",normalized:o[1]};o=p.width||0;var f=p.height||0,a=m(p),d={type:"Image"};if(l.prefix&&l.normalized&&l.normalized.indexOf("/cfs-file")===0){var b=1;if(p.resizeMethod==
"ZoomAndCrop")b=2;a=2;if(p.scaleFactor)a=parseFloat(p.scaleFactor);var n=a*o;f=a*f;p.style=(p.style||"")+(" width:"+o+"px;height:auto;");a=m(p);d.html='<img src="'+l.prefix+"/resized-image.ashx/__size/"+n+"x"+f+"x"+b+l.normalized.substr(l.normalized.indexOf("/",1))+'" '+a+" />"}else if(p.resizeMethod=="ZoomAndCrop"&&o>0&&f>0){l=c.text(i).html();d.html='<img src="'+l+'" style="width: '+o+"px;height:0;padding:"+f+"px 0 0 0;overflow:hidden;background:url('"+l+"') center center no-repeat;background-size:cover;\" "+
a+" />"}else d.html='<img src="'+c.text(i).html()+'" style="max-height: '+f+"px;max-width: "+o+'px;" '+a+" />";return d}var g=q.telligent.evolution.media.previewHtml;h.location.href.split("/");var c=q("<span/>");q.telligent.evolution.media.previewHtml=function(i,p){var l=i;l=l.toLowerCase();(k(l,".jpg")||k(l,".jpeg")||k(l,".png")||k(l,".gif"))&&p.success?p.success(j(i,p)):g(i,p)};return{}},jQuery,window);L("messaging",["util"],function(q,h,k,m){function j(p){if(!p)throw"subscriptionId is required when unsubscribing a message";
if(typeof c[String(p)]!=="undefined"){var l=c[String(p)],o=-1,f=g[l.message];h.each(f,function(a,d){if(d===l)o=a});o>=0&&f.splice(o,1);f.length===0&&delete g[l.message];delete c[String(p)]}}var g={},c={},i={};return{publish:function(p,l){if(!p)throw"messageName is required when publishing a message";if(!(p===null||p.length===0)){var o=g[p];o&&h.each(o,function(f,a){if(a.handler!==null)try{a.handler.call(this,l)}catch(d){}})}},subscribe:function(p,l,o){if(!p)throw"messageName is required when subscribing to a message";
if(p===null||p.length===0)return 0;if(typeof g[p]==="undefined")g[p]=[];var f=l;if(o==m){o=l;f="content"}l={message:p,handler:o,scope:f,id:q.guid()};g[p][g[p].length]=l;c[String(l.id)]=l;i[f]||(i[f]=[]);return i[f][i[f].length]=l.id},unsubscribe:j,clear:function(p){if(p&&i[p]){for(var l=0;l<i[p].length;l++)j(i[p][l]);i[p].length=0}},CONTENT_SCOPE:"content",NAVIGATION_SCOPE:"navigation",GLOBAL_SCOPE:"global"}},jQuery,window);L("navigationStack",["storage","util","environment"],function(q,h,k,m){function j(){var o=
q.get(p);if(!o){o=[];g(o)}return o}function g(o){q.set(p,o)}function c(o){q.del(l+o)}function i(o,f,a,d,b){this.url=o;this.id=f;this.scrollTop=a;this.exclude=d;this.expiration=b}var p="_navigation_stack",l="_navigation_stack_content_";i.prototype.getContent=function(){if(k.isOnline()&&this.expiration&&this.expiration<=(new Date).getTime()){c(this.id);return null}else return q.get(l+this.id)};return function(o){var f=100,a=6E5;if(o){f=o.maxDepth||f;a=o.cacheDuration||a}var d=j();return{setCurrentScrollTop:function(b){if(d!=
m&&b!=m&&d.length>0)d[0].scrollTop=b;g(d)},push:function(b,n){var v=h.guid();d.unshift({url:b,id:v,scrollTop:0,exclude:false,expiration:(new Date((new Date).getTime()+a)).getTime()});q.set(l+v,n);if(d.length>f){v=d.pop();c(v.id)}g(d)},replaceCurrent:function(b,n){if(d&&d.length>0){q.set(l+d[0].id,n);d[0].url=b;d[0].expiration=(new Date((new Date).getTime()+a)).getTime();g(d)}},getCurrent:function(){return d&&d.length>0?new i(d[0].url,d[0].id,d[0].scrollTop,d[0].exclude,d[0].expiration):null},canMoveBack:function(b){if(!(d&&
d.length>1))return null;if(!b)for(var n=1;n<d.length;n++)if(!d[n].exclude)return d[n].url;var v=null;for(n=0;n<d.length;n++)if(d[n].url==b&&!d[n].exclude){v=b;break}return v},peekBack:function(b){for(var n=null,v=0;n!==b&&v<f&&v<d.length;){n=d[v].url;n!=b&&v++;if(b==m)b=n}if(!d||!d[v])return null;return new i(d[v].url,d[v].id,d[v].scrollTop,d[v].exclude,d[v].expiration)},moveBack:function(b){for(var n=null,v=0;n!==b&&v<f&&v<d.length;){n=d[v].url;n!=b&&v++;if(b==m)b=n}if(!d||!d[v])return null;for(b=
0;b<v;b++){c(d[0].id);d.shift()}g(d);return new i(d[0].url,d[0].id,d[0].scrollTop,d[0].exclude,d[0].expiration)},empty:function(){for(var b=0;b<d.length;b++)c(d[b].id);q.del(p);d=[]},exclude:function(){if(d.length>0){d[0].exclude=true;g(d)}},setExpiration:function(b,n){if(!(!d||d.length==0||!b)){if(n)for(var v=0;v<d.length;v++){if(d[v].url==n){d[v].expiration=b.getTime();break}}else d[0].expiration=b.getTime();g(d)}},expireAll:function(){if(!(!d||d.length==0))if(k.isOnline())for(var b=(new Date).getTime(),
n=0;n<d.length;n++)d[n].expiration&&d[n].expiration<=b&&c(d[n].id)},clearContent:function(b){b=b||d[0].url;for(var n=0;n<d.length;n++)if(d[n].url==b){c(d[n].id);break}}}}});L("navigator",["navigationStack","transport","util","url","messaging","environment","lrucache","storage"],function(q,h,k,m,j,g,c,i,p,l,o){function f(t){p(window).on("hashchange",function(){var w=m.hashData()[y],s=t.stack.getCurrent();if(w&&w!=C&&(!s||w!==s.url))if(I)I=false;else{var x=t.stack.peekBack(w);if(x!=null)if(x.exclude){t.stack.moveBack(w);
(x=t.stack.canMoveBack())&&a(x)}else{x=t.stack.moveBack(w);if(w=x.getContent()){t.onLoadFromCache&&t.onLoadFromCache(x.url);s=x.url;var E=G.back;x=x.scrollTop;j.clear(j.CONTENT_SCOPE);t.onNavigated(s,w,E,x)}else{H=false;d(t,x.url,G.back)}return}if(H){H=false;d(t,w,G.none)}else d(t,w,s&&s.url!=null&&s.url!=o?G.forward:G.none)}})}function a(t){var w={};w[y]=t;m.hashData(w)}function d(t,w,s){if(w.indexOf("#")>0)w=w.split("#")[0];t.currentlyLoading=w;t.onLoad(w).done(function(x){if(t.currentlyLoading==
w){if(w.indexOf("#")>0)w=w.split("#")[0];if(t.refreshParams){var E=m.parseQuery(w),D;for(D in E)t.refreshParams[D]!=o&&delete E[D];w=m.modify({url:w,query:E,overrideQuery:true})}if(w.indexOf("#")>0)w=w.split("#")[0];(D=t.stack.getCurrent())&&D.url==w?t.stack.replaceCurrent(w,x):t.stack.push(w,x);D=t.stack.getCurrent();E=w;D=D?D.scrollTop:0;j.clear(j.CONTENT_SCOPE);t.onNavigated(E,x,s,D)}}).fail(function(x){t.onLoadError&&t.onLoadError(x)})}function b(t){var w=m.hashData()[y];if(w&&!t.initFromStorage)d(t,
w,G.none);else{var s=t.stack.getCurrent();if(s&&s.url){a(s.url);if(w=s.getContent()){var x=s.url,E=G.none;s=s.scrollTop;j.clear(j.CONTENT_SCOPE);t.onNavigated(x,w,E,s)}else d(t,s.url,G.none)}else g.type=="webapp"?d(t,t.defaultUrl,G.none):a(t.defaultUrl)}j.subscribe("mobile.resume","global",t.stack.expireAll)}function n(t,w){if(h.isNative())if(t.useDeviceBrowserForExternalUrls)l.open(w,"_system","");else{if(!F){F=true;l.open(w,"_blank","").addEventListener("exit",function(){F=false})}}else if(g.type==
"webapp"){var s=document.createElement("a");s.setAttribute("href",w);s.setAttribute("target","_blank");var x=document.createEvent("HTMLEvents");x.initEvent("click",true,true);s.dispatchEvent(x)}else l.location.href=w}function v(t,w){return p.Deferred(function(s){var x=t.redirectCache.get(w);!x||!x.created||(new Date).getTime()-x.created>24E4?h.load(w).done(function(E){if(E&&E.redirectUrl)w=E.redirectUrl;if(h.isLocal(w)){t.redirectCache.set(w,p.extend({},E,{created:(new Date).getTime()}));s.resolve(E)}else h.getExternalUrl(w).done(function(D){t.redirectCache.set(w,
p.extend({},D||E,{created:(new Date).getTime()}));s.resolve(D||E)}).fail(function(){s.reject()})}).fail(function(){s.reject()}):s.resolve(x)}).promise()}function z(t,w,s){s=s||{};s.refresh&&t.stack.clearContent(w);s.currentContentScrollTop!=o&&t.stack.setCurrentScrollTop(s.currentContentScrollTop);if(h.isLocal(w)){H=s.replace||false;a(w)}else if(w.indexOf("rsw.ashx")>0&&w.indexOf("~")>0){t.onDetermineRedirect&&t.onDetermineRedirect(w);v(t,w).then(function(x){t.onDeterminedRedirect&&t.onDeterminedRedirect(w);
if(x)if(x.error)p.telligent.evolution.user.accessing.isSystemAccount?t.authenticator.login():p.telligent.evolution.notifications.show("Access denied",{type:"error"});else if(x.redirectUrl){s.refresh&&t.stack.clearContent(x.redirectUrl);if(h.isLocal(x.redirectUrl)){H=s.replace||false;a(x.redirectUrl)}else n(t,x.redirectUrl)}else n(t,w);else n(t,w)})}else n(t,w)}var y="__u",C="__reset",I=false,F=false,H=false,G={back:"back",forward:"forward",none:null};return function(t){t=t||{};t.cacheDuration=t.cacheDuration||
6E5;t.stack=new q({maxDepth:t.maxDepth||100,cacheDuration:t.cacheDuration});t.defaultUrl=t.defaultUrl||"/";t.onLoad=t.onLoad||function(){};t.onNavigated=t.onNavigated||function(){};t.initFromStorage=t.initFromStorage||false;t.redirectCache=c({size:250,load:function(){return i.get("_redirect_cache")},persist:function(w){i.set("_redirect_cache",w)}});f(t);b(t);return{navigateTo:function(w,s){z(t,w,s)},navigateBack:function(w){w=w||{refresh:false};w.currentContentScrollTop!=o&&t.stack.setCurrentScrollTop(w.currentContentScrollTop);
var s=t.stack.canMoveBack();if(s){w.refresh&&t.stack.clearContent(s);a(s)}},refresh:function(w){t.stack.setCurrentScrollTop(0);var s=t.stack.getCurrent();if(s){s=w?m.modify({url:s.url,query:w}):s.url;t.refreshParams=w;d(t,s,G.none)}},reset:function(){I=true;j.clear(j.CONTENT_SCOPE);t.stack.empty();a(C);a(t.defaultUrl)},canNavigateBack:function(){var w=t.stack.getCurrent();return t.stack.canMoveBack()!=null&&w&&t.stack.canMoveBack()!=w.url},clearContent:function(w){t.stack.clearContent(w)},setExpiration:function(w,
s){t.stack.setExpiration(w,s)},excludeFromHistory:function(){t.stack.exclude()}}}},jQuery,window);L("postlisthandler",["util","scrollfix","environment"],function(q,h,k,m){return function(j){j=j||{};var g=null,c=m(j.parent),i=j.highlightClassName||"loading-item",p=j.onTap||function(){};return{handleTargetedTaps:function(){c.on("click",".post-list-item",function(l){if(!h.isScrolling())if(!(m(l.target).is("a")||m(l.target).closest("a").length>0)){l=m(this);if(targetUrl=l.data("targeturl")){g&&g.removeClass(i);
l.addClass(i);g=l;p(targetUrl)}}})},clearHighlights:function(){g&&g.removeClass(i)}}}},jQuery,window);L("pushNotifications",["transport","controller","environment","messaging"],function(q,h,k,m,j,g,c){var i=function(n){if(n.length>0){b=n;f();m.subscribe("user.login",m.GLOBAL_SCOPE,function(){f()});m.subscribe("user.logout",m.GLOBAL_SCOPE,function(){a()})}},p=function(){},l=function(n,v){j.telligent.evolution.get({url:j.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/notification/{NotificationId}.json?IncludeFields=NotificationId,ContentId,ContentTypeId,NotificationTypeId,TargetUrl,Message,AvatarUrl,Actors",
global:false,data:{NotificationId:n},success:function(z){m.publish("notification.raised",{id:z.Notification.NotificationId,contentId:z.Notification.ContentId,contentTypeId:z.Notification.ContentTypeId,typeId:z.Notification.NotificationTypeId,contentUrl:z.Notification.TargetUrl,message:z.Notification.Message,avatarUrl:z.Notification.Actors!=null&&z.Notification.Actors.length>0?z.Notification.Actors[z.Notification.Actors.length-1].User.AvatarUrl:null,unreadCount:v})},error:function(){}})},o=function(n,
v){j.telligent.evolution.get({url:j.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/notification/{NotificationId}.json?IncludeFields=TargetUrl,IsRead",global:false,data:{NotificationId:n},success:function(z){var y=function(){var C=z.Notification.TargetUrl;C.indexOf("rsw.ashx")>0&&C.indexOf("~")>0?q.load(C).then(function(I){if(I&&I.redirectUrl)q.isLocal(I.redirectUrl)?j.telligent.evolution.mobile.load(I.redirectUrl):j.telligent.evolution.mobile.load(g.mobileNativeConfig.notificationsUrl?g.mobileNativeConfig.notificationsUrl:
g.mobileNativeConfig.baseUrl+"notifications");else j.telligent.evolution.mobile.load(g.mobileNativeConfig.notificationsUrl?g.mobileNativeConfig.notificationsUrl:g.mobileNativeConfig.baseUrl+"notifications")}):h.load(g.mobileNativeConfig.notificationsUrl?g.mobileNativeConfig.notificationsUrl:g.mobileNativeConfig.baseUrl+"notifications")};if(z.Notification.IsRead){jQuery.telligent.evolution.messaging.publish("notification.read",{unreadCount:v});y()}else j.telligent.evolution.put({url:j.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/notification/{NotificationId}.json",data:{NotificationId:n,MarkAsRead:"True"},success:function(){jQuery.telligent.evolution.messaging.publish("notification.read",{unreadCount:v-1});y()}})},error:function(){}})},f=function(){b!=null&&b.length>0&&d!="Unknown"&&j.telligent.evolution.put({url:j.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/mobile/pushnotifications/registration.json",global:false,async:false,data:{Token:b,Device:d},success:function(){},error:function(){a()}})},a=function(){b!=
null&&b.length>0&&d!="Unknown"&&j.telligent.evolution.del({url:j.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/mobile/pushnotifications/registration.json",global:false,async:false,data:{Token:b,Device:d},success:function(){},error:function(){}})},d=null,b=null;g.androidNotification=function(n){switch(n.event){case "registered":if(n.regid.length>0){b=n.regid;f();m.subscribe("user.login",m.GLOBAL_SCOPE,function(){f()});m.subscribe("user.logout",m.GLOBAL_SCOPE,function(){a()})}break;case "message":if(n.payload.n)n.foreground?
l(n.payload.n,n.payload.msgcnt):o(n.payload.n,n.payload.msgcnt)}};g.iosNotification=function(n){if(n.n!=c)n.foreground==1?l(n.n,n.badge):o(n.n,n.badge)};if(k.type=="native")if(k.device=="android"){d="Android";g.mobileNativeConfig.androidSenderId&&g.plugins.pushNotification.register(g.androidNotification,p,{senderID:g.mobileNativeConfig.androidSenderId,ecb:"androidNotification"})}else if(k.device=="ios"){d="IOS";g.plugins.pushNotification.register(i,p,{badge:"true",sound:"true",alert:"true",ecb:"iosNotification"})}return{}},
jQuery,window);L("refresh",function(q,h){function k(c){c.enablePan&&c.content.on({panstart:function(){if(c.enabled){c.lastPanAt=0;c.revealStart&&c.revealStart()}},panend:function(){c.enabled&&!c.refreshing&&-1*c.container.scrollTop>=c.indicatorHeight+c.overflow&&m(c)},pan:function(i){if(c.enabled)if(!(c.refreshing||i.direction==="right"||i.direction==="left")){i=(new Date).getTime();var p=-1*c.container.scrollTop/(c.indicatorHeight+c.overflow);if(p>0&&i-c.lastPanAt>=c.revealThrottle){c.lastPanAt=
i;c.reveal(p)}}}});c.content.on({swipedown:function(){c.enabled&&!c.refreshing&&c.container.scrollTop<=10&&m(c)}})}function m(c){c.refreshing=true;c.indicator.evolutionTransform({x:0,y:0,position:"static"});c.load(function(){j(c)})}function j(c){c.refreshing=false;if(c.animateClose){clearTimeout(c.stopRefreshingTimeout);c.content.evolutionTransform({x:0,y:-1*c.indicatorHeight},{duration:150});c.stopRefreshingTimeout=setTimeout(function(){c.indicator.evolutionTransform({x:0,y:-1*c.indicatorHeight,
position:"absolute"});c.content.evolutionTransform({x:0,y:0},{duration:1})},300)}else{c.content.evolutionTransform({top:-1*c.indicatorHeight,left:0});c.indicator.evolutionTransform({x:0,y:-1*c.indicatorHeight,position:"absolute"});c.content.evolutionTransform({x:0,y:0})}}function g(c){var i,p;return q.Deferred(function(l){i=c.indicator.outerHeight();if(i==0)p=setInterval(function(){i=c.indicator.outerHeight();if(i>0){clearInterval(p);l.resolve(i)}},10);else l.resolve(i)}).promise()}return function(c){if(c){c.enablePan=
c.enablePan!=h?c.enablePan:true;c.enabled=true;c.indicator=q(c.indicator||"#refresh-indicator");c.content=q(c.content||"#refreshable-content");c.container=c.container.get(0);g(c).done(function(i){c.indicatorHeight=i;c.overflow=c.overflow||10;c.animateClose=c.animateClose!=h?c.animateClose:true;c.revealThrottle=c.revealThrottle||150;if(!c.load)c.load=function(p){setTimeout(function(){p()},2E3)};if(!c.reveal)c.reveal=function(){};c.indicator.evolutionTransform({x:0,y:-1*c.indicatorHeight});k(c)});return{enabled:function(i){if(i!==
h)c.enabled=i;return c.enabled},refresh:function(){if(c.enabled)c.refreshing||m(c)}}}}},jQuery);L("scrollable",["util","messaging"],function(q,h,k){function m(d){if(!a[d.region]){a[d.region]=d.buildIndicator();j(d)}}function j(d){a[d.region].css({visibility:"hidden"}).appendTo(d.element())}function g(d){m(d);a[d.region].appendTo(d.element()).css({visibility:"visible"})}function c(d){a[d.region].css({visibility:"hidden"})}function i(d){var b=f[d];if(b){b.element().off(".scrollable");c(b);h.unsubscribe(f[d].subscription);
delete f[d]}}function p(d,b){if(!d.currentlyLoading){d.currentlyLoading=true;d.pageIndex++;g(d,b);d.loadCallback(d.pageIndex,function(n){d.currentlyLoading=false;j(d);if(f[d.region]&&f[d.region].id==d.id){d.completeCallback(n);if(n&&k.trim(n).length>0){if(d.preFillAttempts>2&&!l(d)){d.preFillAttempts--;p(d,b)}}else d.disable=true}else d.pageIndex--},function(){d.pageIndex--;d.currentlyLoading=false;c(d.region)})}}function l(d){d.children=d.children||d.element().children();for(var b=0,n=0;n<d.children.length;n++)b+=
k(d.children[n]).outerHeight();return b>=d.container.height()}function o(d){i(d.region);var b={pageIndex:d.initialPageIndex,subscription:null,currentlyLoading:false,loadCallback:d.load,region:d.region,completeCallback:d.complete,preFillAttempts:d.preFillAttempts,element:d.element,container:d.container,scrollEndMessage:d.scrollEndMessage,buildIndicator:d.buildIndicator,id:q.guid()};f[d.region]=b;b.subscription=h.subscribe(b.scrollEndMessage,function(){b.disable||p(b)});l(b)?m(b):p(b,true);b.element().on("swipeup.scrollable",
function(){b.disable||g(b)})}var f={},a={};return{register:function(d,b){b=b||{};b.region=d;o(b)},unregister:function(d){i(d)}}},jQuery,window);L("scrolled",function(q,h){function k(g,c,i){g.positionStack.push({position:c,time:i})===4&&g.positionStack.shift()}function m(g,c){g.elm.trigger(q.Event(j,{scrollType:c?"momentum":"drag"}));g.positionStack=[];g.momentumScrolling=false}var j="scrolled";q.event.special.scrolled={add:function(){var g=q(this);if(!g.data("_scrolled_bound")){var c={elm:g,didPointerStart:false,
didScroll:false,didPointerMove:false,didPointerEnd:false,positionStack:[],currentPointerPageY:null,now:null,momentumScrolling:false,lastPointerEndAt:(new Date).getTime()};c.checkInterval=h.setInterval(function(){c.now=(new Date).getTime();if(c.didPointerStart){var i=c.didPointerStart=false;if(c.momentumScrolling){m(c,true);i=true}c.positionStack=[];c.momentumScrolling=false;i||k(c,c.currentPointerPageY,c.now)}if(c.didPointerMove){c.didPointerMove=false;k(c,c.currentPointerPageY,c.now)}if(c.didPointerEnd){c.didPointerEnd=
false;if(!(c.positionStack.length<=1)){k(c,c.currentPointerPageY,c.now);if(c.positionStack.length<=1)i=0;else{i=c.positionStack[c.positionStack.length-1].position-c.positionStack[0].position;if(i<0)i*=-1;i=i/(c.positionStack[c.positionStack.length-1].time-c.positionStack[0].time)}c.momentumScrolling=i>=q.event.special.scrolled.defaults.velocityThreshold;c.momentumScrolling||m(c,false)}c.lastPointerEndAt=(new Date).getTime()}if(c.didScroll){c.didScroll=false;(new Date).getTime()-c.lastPointerEndAt>
100&&c.momentumScrolling&&m(c,true)}},50);c.elm.on("pointerstart",function(i){c.didPointerStart=true;c.currentPointerPageY=i.pointers[0].pageY});c.elm.on("pointermove",function(i){c.didPointerMove=true;c.currentPointerPageY=i.pointers[0].pageY});c.elm.on("scroll",function(){c.didScroll=true});c.elm.on("pointerend",function(i){c.didPointerEnd=true;c.currentPointerPageY=i.pointers[0].pageY});g.data("_scrolled_bound",{context:c})}},teardown:function(){var g=q(this).data("_scrolled_bound");g&&h.clearInterval(g.checkInterval)}};
q.event.special.scrolled.defaults={velocityThreshold:0.2};return{}},jQuery,window);L("scrollfix",["messaging","environment","scrolled"],function(q,h,k,m,j,g){function c(o){var f,a=o.get(0);o.on("pointerstart",function(){f=a.scrollTop;if(f<=0)a.scrollTop=1;if(f+a.offsetHeight>=a.scrollHeight)a.scrollTop=a.scrollHeight-a.offsetHeight-1;originalScrollLeft=a.scrollLeft;if(originalScrollLeft<=0)a.scrollLeft=1;if(originalScrollLeft+a.offsetWidth>=a.scrollWidth)a.scrollLeft=a.scrollWidth-a.offsetWidth-1})}
function i(){function o(){F=m(j).height();C=parseInt(n.css("padding-top"),10);I=n.outerHeight()-C;n.evolutionTransform({"padding-top":F+C,top:-1*F},{duration:0});n.data("_extra_top_padding",F)}function f(H){j.clearTimeout(d);var G=j.scrollY;if(Math.abs(G-v)>I)G>v?n.evolutionTransform({top:G-F-I},{duration:0}).evolutionTransform({top:G-F},{duration:100}):n.evolutionTransform({top:G-F},{duration:50});else n.evolutionTransform({top:G-F},{duration:50});v=G;b=true;if(!H){z=z||m("<div>&nbsp;</div>").css({height:300,
display:"none",backgroundColor:"transparent"});z.appendTo(".slideable:first").show();H=m(document.activeElement);if(window.innerHeight-(H.outerHeight(true)+H.offset().top)<=0){if(y===null)y=m("#content").css("top");m("#content").css({top:h.device=="ios"?"20px":"0px"})}}}function a(){j.clearTimeout(d);v>=I?n.css({visibility:"none"}).evolutionTransform({top:-1*I-F},{duration:0}).evolutionTransform({top:-1*F},{duration:50}):n.evolutionTransform({top:-1*F},{duration:150});v=0;b=false;z&&z.remove();y!==
null&&m("#content").css({top:y});y=null}var d=null,b=false,n=m("#header"),v=0,z,y=null,C,I,F;q.subscribe("mobile.orientationchange",function(){o();b?f():a()});setTimeout(o,100);q.subscribe("mobile.keyboard.open",q.GLOBAL_SCOPE,function(){j.clearTimeout(d);d=j.setTimeout(function(){f(false)},50)});q.subscribe("mobile.keyboard.close",q.GLOBAL_SCOPE,a);m("#content").on("focus","input, select, textarea",function(){if(b){j.clearTimeout(d);d=j.setTimeout(function(){f(true)},1)}});q.subscribe("mobile.keyboard.opened",
q.GLOBAL_SCOPE,function(){});q.subscribe("mobile.keyboard.closed",q.GLOBAL_SCOPE,function(){})}function p(o){var f;m(o).on({pointermove:function(){j.clearTimeout(f);l||(l=true)},scrolled:function(a){if(a.scrollType==="momentum"){j.clearTimeout(f);f=j.setTimeout(function(){l=false},310)}else{j.clearTimeout(f);l=false}}})}var l=false;return{adaptBannerAndFormScrollPositionOnKeyboardFocus:function(){i()},preventBounce:function(o){o=o||m("body").children().first();c(o)},fix:function(o){o.on("touchmove.scrollfix mousemove.scrollfix mspointermove.scrollfix",
function(f){f.originalEvent.preventDefault()})},unfix:function(o){o.off(".scrollfix")},monitorEffectiveScrollState:function(o){h.device=="ios"&&p(o)},isScrolling:function(o){if(o!==g)l=o;return h.device=="ios"?l:false}}},jQuery,window);L("sheet",["scrollfix","messaging"],function(q,h,k,m,j){function g(f){if(!f.inited){f.inited=true;f.backDrop=k(document.createElement("div")).css({backgroundColor:f.backgroundColor,opacity:0.01,zIndex:100,position:"absolute",top:0,left:0,display:"none","-webkit-transform":"translate3d(0,0,0)",
"-webkit-backface-visibility":"hidden",transform:"translate3d(0,0,0)"}).appendTo(f.parent);f.sheet=k(document.createElement("div")).css({zIndex:101,position:"absolute",left:0,top:0,display:"none","-webkit-transform":"translate3d(0,0,0)","-webkit-backface-visibility":"hidden",transform:"translate3d(0,0,0)"}).appendTo(f.parent).addClass(f.cssClass);f.sheet.on("click","a",function(a){a.preventDefault();a=k(this);if((a=a.attr("href")||a.closest("[href]").attr("href"))&&a.length>1&&k.telligent&&k.telligent.evolution&&
k.telligent.evolution.mobile){k.telligent.evolution.mobile.load(a);return false}});o(f);q.fix(f.backDrop);q.fix(f.sheet)}}function c(f){f.windowWidth=window.innerWidth>0?window.innerWidth:screen.width;f.windowHeight=window.innerHeight>0?window.innerHeight:screen.height;f.backDrop.css({width:f.windowWidth,height:f.windowHeight});f.sheet.css({width:f.windowWidth,maxHeight:f.maxHeightPerent*f.windowHeight})}function i(f,a,d){d=d||f.animationDuration;f.backDrop.evolutionTransform({opacity:f.backDrop.css("opacity")}).evolutionTransform({opacity:0.01+
a*f.backgroundOpacity},{duration:d,easing:f.animationEasing});f.sheet.evolutionTransform({y:f.windowHeight-a*f.sheet.outerHeight(),x:0},{duration:d,easing:f.animationEasing});if(a>=1){if(f.onOpened){m.clearTimeout(f.openedTimeout);f.openedTimeout=m.setTimeout(function(){f.onOpened.apply(this);m.clearTimeout(f.openedTimeout)},d)}}else if(a<=0)if(f.onClosed){m.clearTimeout(f.closedTimeout);f.closedTimeout=m.setTimeout(function(){f.onClosed.apply(this);m.clearTimeout(f.closedTimeout)},d)}}function p(f,
a){if(!f.suppress)if(!f.visible){f.visible=true;f.onOpening&&f.onOpening.apply(this);g(f);c(f);f.sheet.empty().append(a);f.sheet.evolutionTransform({y:f.windowHeight,x:0});f.backDrop.get(0).style.display="block";f.sheet.get(0).style.display="block";i(f,1)}}function l(f,a){if(f.visible){f.visible=false;a=a||f.animationDuration;f.onClosing&&f.onClosing.apply(this);i(f,0);m.setTimeout(function(){if(!f.visible){f.visible=false;f.backDrop.get(0).style.display="none";f.sheet.get(0).style.display="none"}},
a)}}function o(f){f.backDrop.on("tap",function(){l(f)});f.enablePan&&f.sheet.on({panstart:function(a){f.startY=a.pageY;f.sheetHeight=f.sheet.outerHeight()},pan:function(a){var d=a.pageY-f.startY;d<0||a.direction==="left"||a.direction==="right"||i(f,(f.sheetHeight-d)/f.sheetHeight,10)},panend:function(a){(f.sheetHeight-(a.pageY-f.startY))/f.sheetHeight<=0.5?l(f,f.animationDuration*3/4):i(f,1,f.animationDuration*3/4)}});f.sheet.on({swipedown:function(){l(f)}})}return function(f){f=f||{};f.enablePan=
f.enablePan!=j?f.enablePan:true;f.maxHeightPerent=f.maxHeightPerent||0.7;f.parent=k(f.parent);f.cssClass=f.cssClass||"sheet";f.backgroundColor=f.backgroundColor||"#333";f.backgroundOpacity=f.backgroundOpacity||0.5;f.animationDuration=f.animationDuration||250;f.animationEasing=f.animationEasing||"cubic-bezier(0.160, 0.060, 0.450, 0.940)";f.visible=false;h.subscribe("mobile.orientationchange",h.GLOBAL_SCOPE,function(){m.setTimeout(function(){c(f)},300)});h.subscribe("mobile.keyboard.open",h.GLOBAL_SCOPE,
function(){f.suppress=true});h.subscribe("mobile.keyboard.close",h.GLOBAL_SCOPE,function(){f.suppress=false});return{show:function(a){p(f,a)},hide:function(){l(f)}}}},jQuery,window);L("shell",["refresh","scrollfix","util","actionSheet","sheet","messaging","environment","scrollable","messagelinkhandler","keyboardShim"],function(q,h,k,m,j,g,c,i,p,l,o,f,a){var d={contentScrollTop:"mobile.content.scrollTop",contentScrollBottom:"mobile.content.scrollBottom",navigationScrollTop:"mobile.navigation.scrollTop",
navigationScrollBottom:"mobile.navigation.scrollBottom"};return function(b){function n(){T=window.innerWidth>0?window.innerWidth:screen.width;la=window.innerHeight>0?window.innerHeight:screen.height;ca=Ca;J=T*ca;O=false;e=Da;r=T/2;N=K=null;X=J*Ea;ba=Fa;fa=o(window).height()-ea.outerHeight()+10;ga.css({width:J});R.css({minHeight:fa});if(!Y){Y=o(document.createElement("div")).html("something").appendTo(U).evolutionTransform({x:0,y:-300});h.fix(Y)}if(!aa){aa=o(document.createElement("div")).css({opacity:0.01}).appendTo(U);
h.fix(aa)}qa=navigator.userAgent.match(/IEMobile/i)}function v(u,A,M){u==0&&b.onNavigationOpening&&b.onNavigationOpening();if(ma)if(qa)if(u<1&&U.css("left")!="0px")U.animate({left:0},{duration:A});else{U.evolutionTransform({x:J*u,y:0},{duration:A,easing:M});u===1&&setTimeout(function(){U.evolutionTransform({x:0,y:0},{duration:0}).css({left:J})},A)}else{M=M||B;U.evolutionTransform({x:J*u,y:0},{duration:A,easing:M});ga.evolutionTransform({x:X*(1-u),y:0,scale:1-ba*(1-u),opacity:0.99-(1-Ga)*(1-u)},{duration:A,
easing:M})}}function z(u){if(ma){O=true;b.onNavigationOpening&&b.onNavigationOpening();if(b.onNavigationOpened){clearTimeout(wa);wa=setTimeout(function(){O&&b.onNavigationOpened()},u+1)}v(1,u);h.fix(U);h.unfix(ga)}}function y(u){if(ma){O=false;b.onNavigationClosing&&b.onNavigationClosing();if(b.onNavigationClosed){clearTimeout(xa);xa=setTimeout(function(){O||b.onNavigationClosed()},u+1)}v(0,u);h.unfix(U);h.fix(ga)}}function C(u){sa&&u.on({panstart:function(A){if(!(A.target.nodeName=="TEXTAREA"||A.target.nodeName==
"INPUT")){if(!O&&A.direction=="right"||O&&A.direction=="left"){h.fix(U);h.fix(ga)}K=A.pageX}},pan:function(A){if(!(A.target.nodeName=="TEXTAREA"||A.target.nodeName=="INPUT")){N=A.pageX-K;if(O)N=J+N;N<0||N>J||A.direction==="up"||A.direction==="down"||v(N/J,10,"linear")}},panend:k.debounce(function(A){if(!(A.target.nodeName=="TEXTAREA"||A.target.nodeName=="INPUT")){var M=o(A.target);if(!(M.is(".ui-links")||M.closest(".ui-links").length>0)){N=A.pageX-K;if(O)N=J+N;if(!(N<0||A.direction==="up"||A.direction===
"down"))if(N>r){A=N/T;A=A>0.5?1-A:A;z(0.5*e+A*0.5*e)}else{A=N/T;A=A>0.5?1-A:A;y(0.5*e+A*0.5*e)}}}})});u.on({swiperight:function(A){A=o(A.target);A.is(".ui-links")||A.closest(".ui-links").length>0||z(e*ca*0.75)},swipeleft:function(){y(e*ca*0.75)}})}function I(){if(c.device=="android"){R.css({display:"inline"});setTimeout(function(){R.css({display:"block"})},10)}}function F(u,A){return o.Deferred(function(M){var V;if(ha){A.animate=false;clearTimeout(Ha);R.empty();V=o(document.createElement("div")).addClass("slideable").css({minHeight:fa}).appendTo(R);
M.resolve()}ha=true;V=R.find(".slideable:first");var ia=R.outerHeight();if(A&&A.animate){var ja=A.duration||e,ka=o(document.createElement("div"));switch(A.animate){case "left":ka.addClass("slideable").appendTo(R).html(u).css({minHeight:fa}).evolutionTransform({x:T,y:-1*ia}).evolutionTransform({x:0,y:-1*ia},{duration:ja,easing:B,complete:function(){ka.evolutionTransform({x:0,y:0});V.remove();I();ha=false;M.resolve()}});V.evolutionTransform({x:-1*T,y:0},{duration:ja,easing:B});break;case "right":ka.addClass("slideable").appendTo(R).html(u).css({minHeight:fa}).evolutionTransform({x:-1*
T,y:-1*ia}).evolutionTransform({x:0,y:-1*ia},{duration:ja,easing:B,complete:function(){ka.evolutionTransform({x:0,y:0});V.remove();I();ha=false;M.resolve()}});V.evolutionTransform({x:T,y:0},{duration:ja,easing:B});break;default:ka.addClass("slideable").appendTo(R).html(u).css({minHeight:fa,opacity:0}).evolutionTransform({x:0,y:-1*ia,opacity:0}).evolutionTransform({x:0,y:-1*ia,opacity:1},{duration:ja/2,easing:B,complete:function(){ka.evolutionTransform({x:0,y:0,opacity:1});V.remove();I();ha=false;
M.resolve()}});V.evolutionTransform({opacity:0.01},{duration:ja/2,easing:B})}}else{V.html(u);I();ha=false;M.resolve()}}).promise()}function H(){Y.evolutionTransform({x:0,y:-1*Y.outerHeight()},{duration:e,easing:B})}function G(u,A){Y.evolutionTransform({x:0,y:-300});Y.empty().append(u);A&&Y.removeClass().addClass(A);Y.evolutionTransform({x:0,y:-1*Y.outerHeight()}).evolutionTransform({x:0,y:0},{duration:e,easing:B})}function t(u,A){if(f.navigator.notification!==undefined&&f.navigator.notification.alert!==
undefined)f.navigator.notification.alert(u,A===undefined?function(){}:A,"");else{Ia(u);A&&A()}}function w(u,A){if(f.navigator.notification!==undefined&&f.navigator.notification.confirm!==undefined)f.navigator.notification.confirm(u,function(V){A!==undefined&&A(V==1)},"");else{var M=f.confirm(u);A&&A(M)}}function s(u,A){if(u){clearTimeout(na);var M=null;if(A){M=A.cssClass;if(A.disappearAfter)na=setTimeout(function(){clearTimeout(na);H()},A.disappearAfter)}else na=setTimeout(function(){clearTimeout(na);
H()},5E3);G(u,M)}else H()}function x(){ta=false;aa.evolutionTransform({opacity:0},{duration:e,easing:B,complete:function(){aa.css({opacity:0.01,top:-5E3,bottom:"auto"})}})}function E(u){Z.evolutionTransform({x:0,y:(1-u)*la},{duration:e/2,easing:B})}function D(){if(!ya){ya=true;Z.css({left:0}).evolutionTransform({x:0,y:la+20},{duration:0});Z.on("swipedown",function(){switch($){case "min":$="closed";E(-2);Z.hide();break;case "open":$="min";E(0.25);break;case "max":$="open";E(0.75)}});Z.on("swipeup",
function(){switch($){case "closed":$="min";E(0.25);Z.hide();break;case "min":$="open";E(0.75);break;case "open":$="max";E(1)}})}}function S(){o(document.activeElement).is("input, textarea")&&document.activeElement.blur()}function P(){g.publish(d.contentScrollTop)}function Q(){W.get(0).scrollTop>10&&g.publish(d.contentScrollBottom)}function oa(){g.publish(d.navigationScrollTop)}function pa(){da.get(0).scrollTop>10&&g.publish(d.navigationScrollBottom)}var T,la,ca,J,O,e,r,B,K,N,X,ba,qa,ma=true,ua,wa,
xa,fa,Ha,ra,za,na,ta=false,sa=b.enablePan!=a?b.enablePan:true;B=b.easing||"cubic-bezier(0.160, 0.060, 0.450, 0.940)";var Ca=b.navigationOpenPercent||0.8,Da=b.navigationOpenDuration||275,Ea=b.navigationClosedOffsetPercent||-0.2,Fa=b.navigationClosedZoom||0,Ga=b.minOpacity||1,Ja=b.sheetMaxHeightPerent||0.7,Ka=b.sheetCssClass||"sheet",La=b.sheetBackgroundColor||"#333",Ma=b.sheetBackgroundOpacity||0.7,Na=b.refreshOverflow||10,Oa=b.refreshRevealThrottle||10,Pa=b.doubleTapHeaderToScroll!=a?b.doubleTapHeaderToScroll:
true,Y,Z,$="closed",ya=false,aa,Ia=f.alert,ha=false,ea=o(b.header),Aa=o(b.viewport),da=o(b.gutter),W=o(b.content),U=o(b.contentWrapper),ga=o(b.gutterWrapper);o(b.gutterContentWrapper);var Ba=o(b.gutterContent),Qa=o(b.refreshIndicator),R=o(b.refreshableContent);Z=o(b.debugContainer);h.preventBounce(da);h.preventBounce(W);h.fix(Z);h.fix(ea);n();g.subscribe("mobile.orientationchange",g.GLOBAL_SCOPE,function(){setTimeout(function(){n()},300)});D();C(U);C(ga);ua=new q({enablePan:sa,container:W,indicator:Qa,
content:R,overflow:Na,revealThrottle:Oa,revealStart:function(){b.onRefreshRevealStart&&b.onRefreshRevealStart()},reveal:function(u){b.onRefreshRevealing&&b.onRefreshRevealing(u)},load:function(u){b.onRefreshing&&b.onRefreshing(u)}});ra=new j({enablePan:sa,parent:Aa,maxHeightPerent:Ja,cssClass:Ka,backgroundColor:La,backgroundOpacity:Ma,animationDuration:e*2/3,animationEasing:B,onOpening:b.onSheetOpening,onOpened:b.onSheetOpened,onClosing:b.onSheetClosing,onClosed:b.onSheetClosed});za=new m({sheet:ra});
o.event.special.scrolltop&&W.on("scrolltop",P);o.event.special.scrollend&&W.on("scrollend",Q);o.event.special.scrolltop&&da.on("scrolltop",oa);o.event.special.scrollend&&da.on("scrollend",pa);(function(){l.handleVisibilityChange({container:W,onShow:function(){b.onKeyboardOpening&&b.onKeyboardOpening()},onHide:function(){b.onKeyboardClosing&&b.onKeyboardClosing()},onShown:function(){b.onKeyboardOpened&&b.onKeyboardOpened()},onHidden:function(){b.onKeyboardClosed&&b.onKeyboardClosed()}})})();(function(){if(i){g.subscribe("mobile.content.loading",
function(){i.unregister("content")});g.subscribe("mobile.navigation.loading",function(){i.unregister("navigation")})}})();c.device!="android"&&da.on("pointerstart",S);f.alert=function(u){t(u,null)};o.telligent.evolution.notifications.show=function(u,A){s(u,{disappearAfter:A.duration||5E3,cssClass:A.type||"success"})};Pa&&ea.on("doubletap",function(){W.animate({scrollTop:0},{duration:e})});f.addEventListener&&f.addEventListener("statusTap",function(){W.animate({scrollTop:0},{duration:e})});return{navigable:function(u){if(u!==
a)ma=u;return ma},refreshable:function(u){return ua.enabled(u)},navigationVisible:function(u){if(u!==a)if(u&&!O)z(e*ca);else!u&&O&&y(e*ca);return O},navigationScrollTop:function(u){if(u!==a&&isNaN(u))u=o(u).offset().top;da.scrollTop(u);return da.scrollTop()},contentScrollTop:function(u){if(u!==a&&isNaN(u)){var A=ea.outerHeight(),M=ea.data("_extra_top_padding")||0;u=o(u).offset().top-(A-M+10)}W.scrollTop(u);return W.scrollTop()},setContent:function(u,A){return F(u,A)},displayMessage:function(u,A){s(u,
A)},alert:function(u,A){t(u,A)},confirm:function(u,A){w(u,A)},debug:function(u){D();if($==="closed"){Z.show();$="min";E(0.25)}f.console&&f.console.log&&f.console.log(u);Z.prepend("<span>"+u+"</br /></span>")},displaySheet:function(u){u=u||{};if(u.links)za.show({links:u.links});else u.content&&ra.show(u.content)},hideSheet:function(){ra.hide()},showLoading:function(u){if(!ta){ta=true;var A=0.99;if(u){u.cssClass&&aa.addClass(u.cssClass);u.content&&aa.empty().append(u.content);if(u.opacity)A=u.opacity}u=
ea.outerHeight();var M=ea.data("_extra_top_padding")||0;aa.css({position:"absolute",top:u-M,left:0,bottom:0,right:0,display:"block"});aa.evolutionTransform({opacity:A},{duration:e,easing:B})}},hideLoading:function(){x()},refresh:function(){ua.refresh()},setClass:function(u){b.viewport.removeClass();u&&b.viewport.addClass(u)},navigationContent:function(){return Ba},content:function(){return R.find(".slideable:first")},contentWrapper:function(){return R},viewport:function(){return Aa},scrollable:function(u){if(!(!i||
!u||!u.load||!u.complete)){var A=u.region||"content";u.initialPageIndex=u.initialPageIndex||0;u.preFillAttempts=u.preFillAttempts||5;if(A=="content"){u.container=W;u.element=function(){return R.find(".slideable:first")};u.scrollEndMessage=d.contentScrollBottom}else{u.container=da;u.element=function(){return Ba};u.scrollEndMessage=d.navigationScrollBottom}u.buildIndicator=function(){return o('<div class="scrollable-loading-indicator"><span class="icon cw"></span></div>')};i.register(A,u)}}}}},jQuery,
window);L("storage",function(q,h){function k(g){return q.telligent.evolution.user.accessing.id+":"+g}function m(g){return"mobile:"+g}var j=q.telligent.evolution.user.accessing.isSystemAccount?h.sessionStorage:h.localStorage;return{set:function(g,c){j&&j.setItem(m(k(g)),JSON.stringify(c))},get:function(g){if(j)return JSON.parse(j.getItem(m(k(g))))},del:function(g){j&&j.removeItem(m(k(g)))},empty:function(){j&&j.clear()}}},jQuery,window);L("touchEventAdapter",["util"],function(q,h,k,m){function j(G,
t){if(!l)if(document.createEventObject){trigger=document.createEventObject();trigger.synthesized=true;G.fireEvent("on"+t,trigger)}else{trigger=document.createEvent("HTMLEvents");trigger.initEvent(t,true,true);trigger.synthesized=true;G.dispatchEvent(trigger)}}function g(){var G=new Date,t=new Date,w;h("body").on("tap",function(s){if(l){s.preventDefault();s.stopPropagation();return false}if(s.target.nodeName=="INPUT"||s.target.nodeName=="TEXTAREA"||s.target.nodeName=="SELECT"||s.target.nodeName=="FILE"){if(s.target.nodeName==
"INPUT"&&s.target.type.toLowerCase()=="checkbox"||s.target.type.toLowerCase()=="radio"){var x=h(s.target);x.is(":checked")?setTimeout(function(){x.prop("checked",false).trigger("change")},25):setTimeout(function(){x.prop("checked",true).trigger("change")},25)}else if(s.target.nodeName=="SELECT")return true;else{t=new Date;w=h(s.target);if(w.is(":focus"))return true;else w.focus()}s.stopPropagation();s.stopImmediatePropagation();s.preventDefault();return false}G=new Date;j(s.target,"click");s.stopPropagation();
s.stopImmediatePropagation();s.preventDefault()});document.addEventListener("click",function(s){if(l){s.preventDefault();s.stopPropagation();return false}var x=new Date-G;if(!(!(s.clientX||s.clientY||s.pageX||s.pageY||s.x||s.y)||s.synthesized)&&x<350){s.preventDefault();s.stopPropagation();return false}return true},true);h("body").on("focus focusin","textarea,input",function(s){if(new Date-t<350){s.preventDefault();s.stopPropagation();return false}else return true})}function c(){var G={mouseenter:"taphold",
mouseover:"taphold",mouseleave:"pointerend",mousedown:"pointerstart",mouseup:"pointerend"};h.fn.on=h.fn.bind=i(h.fn.on,G,true);h.fn.trigger=i(h.fn.trigger,G,false);h.fn.off=h.fn.unbind=i(h.fn.off,G,false)}function i(G,t,w){return function(){var s=Array.prototype.slice.call(arguments,0);if(w&&s.length===1&&h.isPlainObject(s[0])){var x=s[0];h.each(t,function(E,D){if(x[E]!=m){x[D]=x[E];delete x[E]}});return G.call(this,x)}else{if(typeof s[0]!="string")return G.apply(this,s);eventParts=s[0].split(".",
2);if(eventParts.length==2&&(eventParts[1]=="_gesture_events_namespace"||eventParts[1]=="_pointer_events_namespace"))return G.apply(this,s);if(t[eventParts[0]]){eventParts[0]=t[eventParts[0]];s[0]=eventParts.join(".")}return G.apply(this,s)}}}function p(){var G={after:function(){l=true;setTimeout(function(){l=false},o)}};k.alert=q.wrap(k.alert,G);k.confirm=q.wrap(k.confirm,G)}k.parent=k;var l=false,o=250,f="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,a="_evolutionForceTouchRemap"in
window,d=h.telligent&&h.telligent.evolution&&h.telligent.evolution._SUPPRESS_TOUCH_MOUSE_EVENTS,b=h.telligent&&h.telligent.evolution&&h.telligent.evolution._SUPPRESS_TOUCH_CLICK_EVENTS,n=k!=k.parent,v=/chrom(e|ium)/.test(navigator.userAgent.toLowerCase()),z=/android/.test(navigator.userAgent.toLowerCase()),y=/windows nt/.test(navigator.userAgent.toLowerCase()),C="MouseEvent"in window&&(!("ontouchstart"in window)||y),I=parseInt((/Chrome\/([0-9]+)/.exec(navigator.userAgent)||["0","0"])[1],10),F=document.querySelector&&
document.querySelector('meta[name=viewport][content*="width=device-width"]')!==m,H=document.querySelector&&document.querySelector('meta[name=viewport][content*="user-scalable=no"]')!==m;return{adapt:function(){if(f||a){!C&&!d&&c();if(!b&&!n&&!(v&&z&&I>=32&&F)&&!(v&&z&&I<32&&F&&H)){p();g()}h(function(){h("body").addClass("touch")})}}}},jQuery,window);L("transport",["storage"],function(q,h,k,m){function j(l){l=l.indexOf(i)===0?l.substr(i.length):l;l=l.indexOf(p)===0?l.substr(p.length):l;if(l.indexOf("/")==
0)l=l.substr(1);return l}function g(l,o){o=o||{};l=j(l);return h.ajax({type:"GET",url:i+l,cache:false,timeout:6E4,async:o.async===m?true:o.async})}var c=false,i,p;return{load:function(l,o){return g(l,o||{})},configure:function(l){c=l.isNative||c;i=l.baseUrl||i;if(i.lastIndexOf("/")!=i.length-1)i+="/";p=i.substring(8+i.substring(8).lastIndexOf("/",i.length-10));h.ajaxSetup({crossDomain:false})},isNative:function(){return c},isLocal:function(l){l=j(l);return l.indexOf("http")!==0&&l.indexOf("rsw.ashx")!=
0},baseUrl:function(){return i},absolutize:function(l){l=j(l);return l.indexOf("http")!==0?i+l:l},adjustUrl:function(l){return g("callback.ashx?redirect="+encodeURIComponent(l))},getExternalUrl:function(l){return h.Deferred(function(o){var f=j(l);if(f.indexOf("http")===0)o.resolve(null);else f.indexOf("rsw.ashx/rscf_p/")==0?g("callback.ashx?redirect="+encodeURIComponent(f.substr(f.indexOf("~/")))).done(function(a){o.resolve(a)}).fail(function(){o.reject()}):o.resolve(null)}).promise()}}},jQuery,window);
L("uicomments",function(q){q.telligent=q.telligent||{};q.telligent.evolution=q.telligent.evolution||{};q.telligent.evolution.ui=q.telligent.evolution.ui||{};q.telligent.evolution.ui.components=q.telligent.evolution.ui.components||{};q.telligent.evolution.ui.components.comments={setup:function(){},add:function(h,k){q(h).removeClass("ui-comments").evolutionMobileComments({contentId:k.contentid,contentTypeId:k.contenttypeid,typeId:k.typeid,canFlagAsAbusive:k.canflagasabusive.toLowerCase()=="true",accessingUserId:parseInt(k.accessinguserid,
10)})}};return{}},jQuery,window);L("uiformatteddate",function(q){q.telligent=q.telligent||{};q.telligent.evolution=q.telligent.evolution||{};q.telligent.evolution.ui=q.telligent.evolution.ui||{};q.telligent.evolution.ui.components=q.telligent.evolution.ui.components||{};q.telligent.evolution.ui.components.formatteddate={setup:function(){},add:function(h,k){h.removeClass("ui-formatteddate");var m=q.telligent.evolution.parseDate(k.date);(k.format=="date"?q.telligent.evolution.language.formatDate:k.format==
"datetime"?q.telligent.evolution.language.formatDateAndTime:q.telligent.evolution.language.formatAgoDate)(m,function(j){h.html(j)})}};return{}},jQuery,window);L("uilike",["messaging","url"],function(q,h,k){var m=function(j,g,c,i){k.telligent.evolution.get({url:k.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/likes.json",data:{ContentId:j,ContentTypeId:g,TypeId:c,SortBy:"Date",SortOrder:"Descending",PageSize:1,PageIndex:0},cache:false,dataType:"json",success:function(p){i.call(this,{count:p.TotalCount,
latestLike:p.Likes.length>0?p.Likes[0]:null})}})};q.subscribe("ui.like",q.GLOBAL_SCOPE,function(j){var g=j.typeId?k('.ui-like[data-contentid="'+j.contentId+'"][data-contenttypeid="'+j.contentTypeId+'"][data-typeid="'+j.typeId+'"]'):k('.ui-like[data-contentid="'+j.contentId+'"][data-contenttypeid="'+j.contentTypeId+'"]');g.attr("data-initialstate",j.liked.toString()).attr("data-initialcount",j.count.toString());var c=g.find(".like-toggle a").data("evolutionToggleLink");if(c){c.settings.onHtml=c.settings.offHtml=
"<span></span>"+(j.liked?k.fn.evolutionLike.defaults.unlikeText:k.fn.evolutionLike.defaults.likeText);g.find(".like-toggle a").data("evolutionToggleLink",c)}k.telligent.evolution.mobile.hideSheet()});k.telligent.evolution.ui.components.like={setup:function(){k("#refreshable-content").on("click",".who-likes",function(j){j=k(j.target).closest(".ui-like");var g={ContentId:j.data("contentid"),ContentTypeId:j.data("contenttypeid")};if(j.data("typeid"))g.TypeId=j.data("typeid");j=h.modify({url:"likers",
query:g,hash:{}});k.telligent.evolution.mobile.load(j)})},add:function(j,g){var c=g.readonly==="true";k(j).evolutionLike({contentId:g.contentid,contentTypeId:g.contenttypeid,initialState:g.initialstate,initialMessage:g.initialmessage,initialCount:g.initialcount,format:c?g.format.replace("{toggle}",""):g.format,typeId:g.configuration.LikeTypeId,onLike:function(i,p,l,o){var f={ContentId:i,ContentTypeId:p};if(l!==null&&l.length>0)f.TypeId=l;k.telligent.evolution.post({url:k.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/likes.json",data:f,cache:false,dataType:"json",success:function(){m(i,p,l,o)}})},onUnlike:function(i,p,l,o){var f={ContentId:i};if(l!==null&&l.length>0)f.TypeId=l;k.telligent.evolution.del({url:k.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/like.json",data:f,cache:false,dataType:"json",success:function(){m(i,p,l,o)}})}})}};return{}},jQuery,window);L("uilinks",["dynamicLinks","messaging"],function(q,h,k,m){function j(i,p){if(k.telligent&&k.telligent.evolution&&k.telligent.evolution.mobile){var l=
i.slice(0);l.push(p);k.telligent.evolution.mobile.displaySheet({links:k.map(l,function(f){return f.element})});p.element.one("click",function(){k.telligent.evolution.mobile.hideSheet()});var o=h.subscribe("mobile.sheet.closed",function(){k.each(i,function(f,a){g(k(a.element))});h.unsubscribe(o)})}}function g(i){i.is('[class^="ui-"]')?i.empty().remove():i.detach()}k.fn.uilinks=function(){var i=this.data("_dynamic_links"),p=Array.prototype.slice.call(arguments,0),l=p[0];if(!i)return this;if(l=="add"){l=
p[1];p=k.extend({},{className:null,selected:false},p[2]||{});i.addLink({element:l,className:p.className,selected:p.selected})}else if(l=="insert"){l=p[1];var o=p[2];p=k.extend({},{className:null,selected:false},p[3]||{});i.addLink({element:l,className:p.className,selected:p.selected},o)}else l=="remove"&&i.removeLink(p[1]);return this};var c={setup:function(){},add:function(i,p){i=k(i);var l=i.find("li");parsedMaxLinks=p.maxlinks;parsedMinLinks=p.minlinks;var o={parent:i,links:[],onShowMore:j,animate:false};
if(parsedMaxLinks)o.maxLinks=parseInt(parsedMaxLinks,10);if(parsedMinLinks)o.minLinks=parseInt(parsedMinLinks,10);if(p.animate=="true")o.animate=true;for(var f=0;f<l.length;f++){var a=k(l[f]),d=a.children();g(d);var b=d.is("[data-selected]");if(d.is("[data-more]"))o.moreLink={element:d,selected:b,className:a.get(0).className};else if(d.is("[data-cancel]"))o.cancelLink={element:d,selected:b,className:a.get(0).className};else o.links.push({element:d,selected:b,className:a.get(0).className})}i.empty();
var n=new q(o);n.render();h.subscribe("mobile.content.loaded",function(){n.render()});i.data("_dynamic_links",n);h.subscribe("mobile.orientationchange",function(){m.setTimeout(function(){n.render()},300)})}};k.telligent=k.telligent||{};k.telligent.evolution=k.telligent.evolution||{};k.telligent.evolution.ui=k.telligent.evolution.ui||{};k.telligent.evolution.ui.components=k.telligent.evolution.ui.components||{};return k.telligent.evolution.ui.components.links=c},jQuery,window);L("uimoderate",["messaging"],
function(q,h){h.telligent.evolution.ui.components.moderate={setup:function(){},add:function(k,m){var j=h('<a href="#">Flag as spam/abuse</a>').hide().appendTo(k),g=h('<a href="#">\u2026</a>').hide().appendTo(k),c=h('<a href="#">Flagged as spam/abuse</a>').hide().appendTo(k);m.initialstate=="true"?c.show():j.show().on("click",function(){g.show();j.hide();h.telligent.evolution.post({url:h.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/abusereports.json",data:{ContentId:m.contentid,ContentTypeId:m.contenttypeid},
cache:false,dataType:"json"}).then(function(){c.show();g.hide();q.publish("ui.reportabuse",{contentId:m.contentid,contentTypeId:m.contenttypeid})})})}};h.telligent.evolution.ui.components.moderate.defaults={reportedText:"Thank you for your report",flagText:"Flag as spam/abuse",flaggedText:"Flagged as spam/abuse"}},jQuery,window);L("url",function(q,h){var k={parseQuery:function(m){var j=m.split("?"),g={};m=(j.length>1?j[1]:m).split("#")[0].split("&");for(j=0;j<m.length;j++){var c=m[j].split("=");if(c.length===
2)g[c[0]]=decodeURIComponent(c[1].replace(/\+/gi," "))}return g},serializeQuery:function(m){m=m||{};var j=[],g;for(g in m){var c=m[g];j[j.length]=encodeURIComponent(g)+"="+encodeURIComponent(c)}return j.join("&")},modify:function(m){m=q.extend({url:h.location.href,query:null,hash:h.location.hash,protocol:h.location.protocol,overrideQuery:false},m);var j=[m.url.split("?")[0].split("#")[0]],g;if(typeof m.query==="string")m.query=k.parseQuery(m.query);if((g=m.overrideQuery?k.serializeQuery(m.query):
k.serializeQuery(q.extend(k.parseQuery(m.url),m.query)))&&g.length>0)j[j.length]="?"+g;if(m.hash&&m.hash.length>0)j[j.length]=(m.hash.indexOf("#")!==0?"#":"")+m.hash;return j.join("")},hashData:function(m,j){if(typeof m==="undefined"){m={};var g=h.location.href.split("#"),c="";if(g.length>2){for(var i=0;i<g.length;i++)if(i>0){if(i>1)c+="#";c+=g[i]}g=[g[0],c]}if(g.length===2)m=k.parseQuery(g[1]);return m}else{j||(m=q.extend(k.hashData(),m));h.location.href=h.location.href.split("#")[0]+"#"+k.serializeQuery(m)}}};
return k},jQuery,window);L("util",function(q){function h(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return{throttle:function(k,m){var j,g;return function(){var c=this;attemptAt=(new Date).getTime();args=arguments;if(j&&j+(m||50)>attemptAt){q.clearTimeout(g);g=q.setTimeout(function(){j=attemptAt;k.apply(c,args)},m||50)}else{j=attemptAt;k.apply(c,args)}}},debounce:function(k,m){var j;return function(){var g=this,c=arguments;clearTimeout(j);j=setTimeout(function(){k.apply(g,
c)},m||10)}},wrap:function(k,m){return function(){try{m.before&&m.before.apply(this,arguments)}catch(j){}var g=k.apply(this,arguments);try{m.after&&m.after.apply(this,arguments)}catch(c){}return g}},guid:function(){return h()+h()+"-"+h()+"-"+h()+"-"+h()+"-"+h()+h()+h()}}},window);va(["controller","transport","messaging","pushNotifications","environment","media","uiformatteddate","evolutionMobileComments","uicomments","uimoderate","uilike","evolutionResize","evolutionHighlight","keyboardfix","glowUpload",
"scrollfix","touchEventAdapter","evolutionTransform"],function(q,h,k,m,j,g,c,i,p,l,o,f,a,d,b,n,v,z,y,C){y.telligent=y.telligent||{};y.telligent.evolution=y.telligent.evolution||{};y.telligent.evolution.mobile=y.telligent.evolution.mobile||{environment:j,defaults:q.defaults};y(function(){function I(){y.telligent.evolution.mobile.init=function(x){if(!w){w=true;y.extend(y.telligent.evolution.mobile,new q(x))}}}function F(){var x={},E=function(D,S){var P=x[D.toString()];typeof P==="undefined"?y.telligent.evolution.get({url:"services/formatagodate",
data:{date:y.telligent.evolution.formatDate(D)},success:function(Q){if(Q&&S&&typeof Q!=="undefined"&&Q!==null&&Q.formattedDate){x[D.toString()]=Q.formattedDate;S(Q.formattedDate)}}}):S(P)};if(!y.telligent)y.telligent={};if(!y.telligent.evolution)y.telligent.evolution={};y.telligent.evolution.language=y.extend({},y.telligent.evolution.language,{formatAgoDate:function(D,S){E(D,S)}})}function H(){k.subscribe("ui.reportabuse",k.GLOBAL_SCOPE,function(x){y('.ui-moderate[data-contentid="'+x.contentId+'"][data-contenttypeid="'+
x.contentTypeId+'"]').attr("data-initialstate","true");y.telligent.evolution.mobile.displayMessage(y.telligent.evolution.ui.components.moderate.defaults.reportedText,{disappearAfter:5E3,cssClass:"info"});y.telligent.evolution.mobile.hideSheet()});k.subscribe("ui.bookmark",k.GLOBAL_SCOPE,function(x){(x.typeId?y('.ui-bookmark[data-contentid="'+x.contentId+'"][data-contenttypeid="'+x.contentTypeId+'"][data-typeid="'+x.typeId+'"]'):y('.ui-bookmark[data-contentid="'+x.contentId+'"][data-contenttypeid="'+
x.contentTypeId+'"]')).attr("data-value",x.bookmarked.toString());y.telligent.evolution.mobile.displayMessage(x.bookmarked?"Bookmark added":"Bookmark removed",{disappearAfter:2500,cssClass:"info"});y.telligent.evolution.mobile.hideSheet()})}function G(){y(document).ajaxSend(function(x,E,D){D.url=h.absolutize(D.url)});y(document).ajaxError(function(x,E,D){D.url.indexOf("rsw")<0||y.telligent.evolution.mobile.displayMessage("An error has occurred",{cssClass:"warning",disappearAfter:1E4})})}function t(){y.telligent.evolution.messaging=
{publish:k.publish,subscribe:k.subscribe,unsubscribe:k.unsubscribe};G();H();I();F()}v.adapt();d.fix();n.adaptBannerAndFormScrollPositionOnKeyboardFocus();var w=false;if(j.type=="native")document.addEventListener("deviceready",function(){h.configure({isNative:true,domain:C.mobileNativeConfig.domain,baseUrl:C.mobileNativeConfig.baseUrl});t()});else{var s=C.location.href.indexOf("#")>-1?C.location.href.substr(0,C.location.href.indexOf("#")):C.location.href;s=s.indexOf("?")>-1?s.substr(0,s.indexOf("?")):
s;if(s.lastIndexOf("/")!=s.length-1)s+="/";h.configure({isNative:false,baseUrl:s});t()}y("body").addClass(j.device+" "+j.type)})},jQuery,window)})();
